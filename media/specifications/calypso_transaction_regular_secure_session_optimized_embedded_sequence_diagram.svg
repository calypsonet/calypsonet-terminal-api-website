<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="6599px" preserveAspectRatio="none" style="width:1545px;height:6599px;background:#FFFFFF;" version="1.1" viewBox="0 0 1545 6599" width="1545px" zoomAndPan="magnify"><defs/><g><rect fill="#FFD700" height="6417.9961" style="stroke:#181818;stroke-width:1.0;" width="10" x="75.0166" y="91.4883"/><rect fill="#FFC0CB" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="403.7148" y="272.3516"/><rect fill="#FFC0CB" height="197.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="403.7148" y="315.6621"/><rect fill="#FFC0CB" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="403.7148" y="947.1152"/><rect fill="#FFC0CB" height="149.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="403.7148" y="990.4258"/><rect fill="#FFC0CB" height="262.7949" style="stroke:#181818;stroke-width:1.0;" width="10" x="403.7148" y="1347.8418"/><rect fill="#FFC0CB" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="403.7148" y="1639.9473"/><rect fill="#ADD8E6" height="161.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="666.6992"/><rect fill="#ADD8E6" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="888.4941"/><rect fill="#ADD8E6" height="59.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="1698.5684"/><rect fill="#ADD8E6" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="1969.9844"/><rect fill="#ADD8E6" height="511.1504" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="2013.2949"/><rect fill="#ADD8E6" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="2569.0664"/><rect fill="#ADD8E6" height="285.0371" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="2612.377"/><rect fill="#ADD8E6" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="2984.3457"/><rect fill="#ADD8E6" height="300.3477" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="3027.6563"/><rect fill="#ADD8E6" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="3414.9355"/><rect fill="#ADD8E6" height="315.6582" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="3458.2461"/><rect fill="#ADD8E6" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="3860.8359"/><rect fill="#ADD8E6" height="330.9688" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="3904.1465"/><rect fill="#ADD8E6" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="4352.668"/><rect fill="#ADD8E6" height="1593.834" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="4395.9785"/><rect fill="#ADD8E6" height="161.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="6145.7578"/><rect fill="#ADD8E6" height="173.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="761.519" y="1407.7734"/><rect fill="#ADD8E6" height="190.9883" style="stroke:#181818;stroke-width:1.0;" width="10" x="761.519" y="2151.9727"/><rect fill="#ADD8E6" height="119.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="761.519" y="2672.3086"/><rect fill="#ADD8E6" height="119.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="761.519" y="3087.5879"/><rect fill="#ADD8E6" height="119.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="761.519" y="3518.1777"/><rect fill="#ADD8E6" height="119.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="761.519" y="3964.0781"/><rect fill="#ADD8E6" height="418.1621" style="stroke:#181818;stroke-width:1.0;" width="10" x="761.519" y="5164.75"/><rect fill="#ADD8E6" height="4905.8477" style="stroke:#181818;stroke-width:1.0;" width="10" x="1030.1665" y="1437.084"/><rect fill="#90EE90" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1115.1738" y="213.7305"/><rect fill="#90EE90" height="44.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="1115.1738" y="542.1465"/><rect fill="#90EE90" height="72.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="1226.1885" y="375.5938"/><rect fill="#90EE90" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="1226.1885" y="726.6309"/><rect fill="#90EE90" height="555.9766" style="stroke:#181818;stroke-width:1.0;" width="10" x="1226.1885" y="4548.8418"/><rect fill="#90EE90" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="1226.1885" y="5734.7754"/><rect fill="#90EE90" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="1226.1885" y="6205.6895"/><rect fill="#90EE90" height="6104.5801" style="stroke:#181818;stroke-width:1.0;" width="10" x="1489.4785" y="404.9043"/><rect fill="none" height="147.6777" style="stroke:#000000;stroke-width:1.5;" width="543.6665" x="526" y="2166.9727"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="365.0049" x="704.6616" y="2687.3086"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="365.0049" x="704.6616" y="3102.5879"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="365.0049" x="704.6616" y="3533.1777"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="365.0049" x="704.6616" y="3979.0781"/><rect fill="none" height="109.7461" style="stroke:#000000;stroke-width:1.5;" width="358.2974" x="1170.6812" y="4908.1406"/><rect fill="none" height="119.2422" style="stroke:#000000;stroke-width:1.5;" width="365.0049" x="704.6616" y="5179.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="80" x2="80" y1="81.4883" y2="6518.4844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="408.4229" x2="408.4229" y1="81.4883" y2="6518.4844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="497.0068" x2="497.0068" y1="81.4883" y2="6518.4844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="765.6616" x2="765.6616" y1="81.4883" y2="6518.4844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1034.6665" x2="1034.6665" y1="81.4883" y2="6518.4844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1119.6665" x2="1119.6665" y1="81.4883" y2="6518.4844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1230.6812" x2="1230.6812" y1="81.4883" y2="6518.4844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1493.9785" x2="1493.9785" y1="81.4883" y2="6518.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144.0332" x="5" y="78.5352">Ticketing Application</text><ellipse cx="80.0166" cy="13.5" fill="#FFD700" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M80.0166,21.5 L80.0166,48.5 M67.0166,29.5 L93.0166,29.5 M80.0166,48.5 L67.0166,63.5 M80.0166,48.5 L93.0166,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144.0332" x="5" y="6531.0195">Ticketing Application</text><ellipse cx="80.0166" cy="6542.4727" fill="#FFD700" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M80.0166,6550.4727 L80.0166,6577.4727 M67.0166,6558.4727 L93.0166,6558.4727 M80.0166,6577.4727 L67.0166,6592.4727 M80.0166,6577.4727 L93.0166,6592.4727 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#FFC0CB" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86.584" x="365.4229" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.584" x="372.4229" y="70.5352">Reader API</text><rect fill="#FFC0CB" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86.584" x="365.4229" y="6517.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.584" x="372.4229" y="6538.0195">Reader API</text><rect fill="#ADD8E6" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.8184" x="462.0068" y="33.5117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.3271" x="471.2524" y="54.0469">Calypso</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.8184" x="469.0068" y="70.5352">Card API</text><rect fill="#ADD8E6" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.8184" x="462.0068" y="6517.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.3271" x="471.2524" y="6538.0195">Calypso</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.8184" x="469.0068" y="6554.5078">Card API</text><rect fill="#ADD8E6" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.7148" x="714.6616" y="33.5117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.7148" x="721.6616" y="54.0469">Calypso Card</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.7236" x="743.1572" y="70.5352">Reader</text><rect fill="#ADD8E6" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.7148" x="714.6616" y="6517.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.7148" x="721.6616" y="6538.0195">Calypso Card</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.7236" x="743.1572" y="6554.5078">Reader</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="33.8447" x="1015.2441" y="78.5352">Card</text><path d="M1014.6665,37 L1014.6665,61 M1014.6665,49 L1031.6665,49 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="1043.6665" cy="49" fill="#ADD8E6" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="33.8447" x="1015.2441" y="6531.0195">Card</text><path d="M1014.6665,6537.9727 L1014.6665,6561.9727 M1014.6665,6549.9727 L1031.6665,6549.9727 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="1043.6665" cy="6549.9727" fill="#ADD8E6" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#90EE90" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.0146" x="1069.6665" y="33.5117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.0146" x="1076.6665" y="54.0469">Calypso SAM</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21.4307" x="1109.4585" y="70.5352">API</text><rect fill="#90EE90" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.0146" x="1069.6665" y="6517.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.0146" x="1076.6665" y="6538.0195">Calypso SAM</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21.4307" x="1109.4585" y="6554.5078">API</text><rect fill="#90EE90" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.0146" x="1180.6812" y="33.5117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.0146" x="1187.6812" y="54.0469">Calypso SAM</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.7236" x="1207.8267" y="70.5352">Reader</text><rect fill="#90EE90" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.0146" x="1180.6812" y="6517.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.0146" x="1187.6812" y="6538.0195">Calypso SAM</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.7236" x="1207.8267" y="6554.5078">Reader</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="31.0146" x="1475.9712" y="78.5352">SAM</text><path d="M1473.9785,37 L1473.9785,61 M1473.9785,49 L1490.9785,49 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="1502.9785" cy="49" fill="#90EE90" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="31.0146" x="1475.9712" y="6531.0195">SAM</text><path d="M1473.9785,6537.9727 L1473.9785,6561.9727 M1473.9785,6549.9727 L1490.9785,6549.9727 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="1502.9785" cy="6549.9727" fill="#90EE90" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#FFD700" height="6417.9961" style="stroke:#181818;stroke-width:1.0;" width="10" x="75.0166" y="91.4883"/><rect fill="#FFC0CB" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="403.7148" y="272.3516"/><rect fill="#FFC0CB" height="197.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="403.7148" y="315.6621"/><rect fill="#FFC0CB" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="403.7148" y="947.1152"/><rect fill="#FFC0CB" height="149.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="403.7148" y="990.4258"/><rect fill="#FFC0CB" height="262.7949" style="stroke:#181818;stroke-width:1.0;" width="10" x="403.7148" y="1347.8418"/><rect fill="#FFC0CB" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="403.7148" y="1639.9473"/><rect fill="#ADD8E6" height="161.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="666.6992"/><rect fill="#ADD8E6" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="888.4941"/><rect fill="#ADD8E6" height="59.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="1698.5684"/><rect fill="#ADD8E6" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="1969.9844"/><rect fill="#ADD8E6" height="511.1504" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="2013.2949"/><rect fill="#ADD8E6" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="2569.0664"/><rect fill="#ADD8E6" height="285.0371" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="2612.377"/><rect fill="#ADD8E6" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="2984.3457"/><rect fill="#ADD8E6" height="300.3477" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="3027.6563"/><rect fill="#ADD8E6" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="3414.9355"/><rect fill="#ADD8E6" height="315.6582" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="3458.2461"/><rect fill="#ADD8E6" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="3860.8359"/><rect fill="#ADD8E6" height="330.9688" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="3904.1465"/><rect fill="#ADD8E6" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="4352.668"/><rect fill="#ADD8E6" height="1593.834" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="4395.9785"/><rect fill="#ADD8E6" height="161.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="492.916" y="6145.7578"/><rect fill="#ADD8E6" height="173.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="761.519" y="1407.7734"/><rect fill="#ADD8E6" height="190.9883" style="stroke:#181818;stroke-width:1.0;" width="10" x="761.519" y="2151.9727"/><rect fill="#ADD8E6" height="119.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="761.519" y="2672.3086"/><rect fill="#ADD8E6" height="119.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="761.519" y="3087.5879"/><rect fill="#ADD8E6" height="119.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="761.519" y="3518.1777"/><rect fill="#ADD8E6" height="119.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="761.519" y="3964.0781"/><rect fill="#ADD8E6" height="418.1621" style="stroke:#181818;stroke-width:1.0;" width="10" x="761.519" y="5164.75"/><rect fill="#ADD8E6" height="4905.8477" style="stroke:#181818;stroke-width:1.0;" width="10" x="1030.1665" y="1437.084"/><rect fill="#90EE90" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1115.1738" y="213.7305"/><rect fill="#90EE90" height="44.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="1115.1738" y="542.1465"/><rect fill="#90EE90" height="72.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="1226.1885" y="375.5938"/><rect fill="#90EE90" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="1226.1885" y="726.6309"/><rect fill="#90EE90" height="555.9766" style="stroke:#181818;stroke-width:1.0;" width="10" x="1226.1885" y="4548.8418"/><rect fill="#90EE90" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="1226.1885" y="5734.7754"/><rect fill="#90EE90" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="1226.1885" y="6205.6895"/><rect fill="#90EE90" height="6104.5801" style="stroke:#181818;stroke-width:1.0;" width="10" x="1489.4785" y="404.9043"/><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1538.9785" x="0" y="112.1436"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1538.9785" y1="112.1436" y2="112.1436"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1538.9785" y1="115.1436" y2="115.1436"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="314.8091" x="612.0847" y="101.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="296.5244" x="618.0847" y="118.0566">Access Control embedded Terminal settings</text><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="127.0166" y1="156.1094" y2="156.1094"/><line style="stroke:#181818;stroke-width:1.0;" x1="127.0166" x2="127.0166" y1="156.1094" y2="169.1094"/><line style="stroke:#181818;stroke-width:1.0;" x1="86.0166" x2="127.0166" y1="169.1094" y2="169.1094"/><polygon fill="#181818" points="96.0166,165.1094,86.0166,169.1094,96.0166,173.1094,92.0166,169.1094" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20.2363" x="92.0166" y="151.3672">set</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.6104" x="116.3662" y="151.3672">Calypso SAM lib</text><polygon fill="#181818" points="1103.1738,209.7305,1113.1738,213.7305,1103.1738,217.7305,1107.1738,213.7305" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="1109.1738" y1="213.7305" y2="213.7305"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="51.9238" x="92.0166" y="193.6777">prepare</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.7681" x="148.0537" y="193.6777">card selection:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.5103" x="124.9229" y="208.9883">- filter by Power-On data</text><polygon fill="#181818" points="96.0166,223.7305,86.0166,227.7305,96.0166,231.7305,92.0166,227.7305" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="1119.1738" y1="227.7305" y2="227.7305"/><polygon fill="#181818" points="391.7148,268.3516,401.7148,272.3516,391.7148,276.3516,395.7148,272.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="397.7148" y1="272.3516" y2="272.3516"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="51.9238" x="92.0166" y="252.2988">prepare</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.7192" x="148.0537" y="252.2988">card selection scenario:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.9683" x="124.9229" y="267.6094">- legacy SAM selection</text><polygon fill="#181818" points="96.0166,282.3516,86.0166,286.3516,96.0166,290.3516,92.0166,286.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="407.7148" y1="286.3516" y2="286.3516"/><polygon fill="#181818" points="391.7148,311.6621,401.7148,315.6621,391.7148,319.6621,395.7148,315.6621" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="397.7148" y1="315.6621" y2="315.6621"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.0635" x="92.0166" y="310.9199">process</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228.9854" x="148.1934" y="310.9199">synchronous card selection scenario</text><polygon fill="#00FF00" points="1214.1885,371.5938,1224.1885,375.5938,1214.1885,379.5938,1218.1885,375.5938" style="stroke:#00FF00;stroke-width:1.0;"/><line style="stroke:#00FF00;stroke-width:1.0;" x1="413.7148" x2="1220.1885" y1="375.5938" y2="375.5938"/><text fill="#008000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="49.3403" x="420.7148" y="340.2305">SAM #x</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.7852" x="420.7148" y="355.541">transmit selection request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.7837" x="453.6211" y="370.8516">- card selector</text><polygon fill="#181818" points="1477.4785,400.9043,1487.4785,404.9043,1477.4785,408.9043,1481.4785,404.9043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1236.1885" x2="1483.4785" y1="404.9043" y2="404.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.0859" x="1243.1885" y="400.1621">open card channel</text><polygon fill="#181818" points="1247.1885,414.9043,1237.1885,418.9043,1247.1885,422.9043,1243.1885,418.9043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1241.1885" x2="1488.4785" y1="418.9043" y2="418.9043"/><polygon fill="#00FF00" points="424.7148,444.2148,414.7148,448.2148,424.7148,452.2148,420.7148,448.2148" style="stroke:#00FF00;stroke-width:1.0;"/><line style="stroke:#00FF00;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="418.7148" x2="1230.1885" y1="448.2148" y2="448.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.915" x="430.7148" y="443.4727">receive selection response</text><path d="M898,461.2148 L898,486.2148 L1340,486.2148 L1340,471.2148 L1330,461.2148 L898,461.2148 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1330,461.2148 L1330,471.2148 L1340,471.2148 L1330,461.2148 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="421.9922" x="904" y="478.7832">The SAM remains permanently selected between card transactions.</text><polygon fill="#181818" points="96.0166,508.8359,86.0166,512.8359,96.0166,516.8359,92.0166,512.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="407.7148" y1="512.8359" y2="512.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205.1816" x="102.0166" y="508.0938">selected active SmartCard image</text><polygon fill="#181818" points="1103.1738,538.1465,1113.1738,542.1465,1103.1738,546.1465,1107.1738,542.1465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="1109.1738" y1="542.1465" y2="542.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27.1807" x="92.0166" y="537.4043">cast</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58.6206" x="123.3105" y="537.4043">SAM card</text><polygon fill="#181818" points="96.0166,582.7676,86.0166,586.7676,96.0166,590.7676,92.0166,586.7676" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="1119.1738" y1="586.7676" y2="586.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.894" x="102.0166" y="566.7148">[legacy SAM image:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.2983" x="134.9229" y="582.0254">- identification data]</text><path d="M920,599.7676 L920,639.7676 L1319,639.7676 L1319,609.7676 L1309,599.7676 L920,599.7676 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1309,599.7676 L1309,609.7676 L1319,609.7676 L1309,599.7676 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="378.1045" x="926" y="617.3359">Apart from SAM module selection, a secure transaction with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="363.3018" x="926" y="632.6465">a Calypso card is managed independently of the SAM API.</text><polygon fill="#181818" points="480.916,662.6992,490.916,666.6992,480.916,670.6992,484.916,666.6992" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="486.916" y1="666.6992" y2="666.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22.2612" x="92.0166" y="661.957">init</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220.7017" x="118.3911" y="661.957">crypto context for next transaction</text><polygon fill="#00FF00" points="1214.1885,722.6309,1224.1885,726.6309,1214.1885,730.6309,1218.1885,726.6309" style="stroke:#00FF00;stroke-width:1.0;"/><line style="stroke:#00FF00;stroke-width:1.0;" x1="502.916" x2="1220.1885" y1="726.6309" y2="726.6309"/><text fill="#008000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.5522" x="509.916" y="691.2676">SAM #x'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.9224" x="509.916" y="706.5781">transmit card request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.6528" x="542.8223" y="721.8887">- APDU list</text><polygon fill="#181818" points="1477.4785,751.9414,1487.4785,755.9414,1477.4785,759.9414,1481.4785,755.9414" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1236.1885" x2="1483.4785" y1="755.9414" y2="755.9414"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84.4048" x="1243.1885" y="751.1992">get challenge</text><polygon fill="#181818" points="1247.1885,781.252,1237.1885,785.252,1247.1885,789.252,1243.1885,785.252" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1241.1885" x2="1488.4785" y1="785.252" y2="785.252"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.8169" x="1253.1885" y="780.5098">[SAM challenge]</text><polygon fill="#00FF00" points="513.916,810.5625,503.916,814.5625,513.916,818.5625,509.916,814.5625" style="stroke:#00FF00;stroke-width:1.0;"/><line style="stroke:#00FF00;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="507.916" x2="1230.1885" y1="814.5625" y2="814.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.8169" x="519.916" y="809.8203">[SAM challenge]</text><polygon fill="#181818" points="96.0166,824.5625,86.0166,828.5625,96.0166,832.5625,92.0166,828.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="496.916" y1="828.5625" y2="828.5625"/><polygon fill="#181818" points="480.916,884.4941,490.916,888.4941,480.916,892.4941,484.916,888.4941" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="486.916" y1="888.4941" y2="888.4941"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="51.9238" x="92.0166" y="853.1309">prepare</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.7681" x="148.0537" y="853.1309">card selection:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.7852" x="124.9229" y="868.4414">- filter by specific AID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188.1572" x="124.9229" y="883.752">- filter invalidated card status</text><polygon fill="#181818" points="96.0166,898.4941,86.0166,902.4941,96.0166,906.4941,92.0166,902.4941" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="496.916" y1="902.4941" y2="902.4941"/><polygon fill="#181818" points="391.7148,943.1152,401.7148,947.1152,391.7148,951.1152,395.7148,947.1152" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="397.7148" y1="947.1152" y2="947.1152"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="51.9238" x="92.0166" y="927.0625">prepare</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.7192" x="148.0537" y="927.0625">card selection scenario:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.9214" x="124.9229" y="942.373">- Calypso card selection</text><polygon fill="#181818" points="96.0166,957.1152,86.0166,961.1152,96.0166,965.1152,92.0166,961.1152" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="407.7148" y1="961.1152" y2="961.1152"/><polygon fill="#181818" points="391.7148,986.4258,401.7148,990.4258,391.7148,994.4258,395.7148,990.4258" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="397.7148" y1="990.4258" y2="990.4258"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="59.4204" x="92.0166" y="985.6836">schedule</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236.1646" x="155.5503" y="985.6836">asynchronous card selection scenario</text><polygon fill="#181818" points="96.0166,1000.4258,86.0166,1004.4258,96.0166,1008.4258,92.0166,1004.4258" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="402.7148" y1="1004.4258" y2="1004.4258"/><polygon fill="#181818" points="391.7148,1029.7363,401.7148,1033.7363,391.7148,1037.7363,395.7148,1033.7363" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="397.7148" y1="1033.7363" y2="1033.7363"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23.5435" x="92.0166" y="1028.9941">add</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="59.0332" x="119.6733" y="1028.9941">observer</text><polygon fill="#181818" points="96.0166,1043.7363,86.0166,1047.7363,96.0166,1051.7363,92.0166,1047.7363" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="402.7148" y1="1047.7363" y2="1047.7363"/><polygon fill="#181818" points="391.7148,1073.0469,401.7148,1077.0469,391.7148,1081.0469,395.7148,1077.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="397.7148" y1="1077.0469" y2="1077.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="98.0967" x="92.0166" y="1072.3047">start detection</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.2554" x="194.2266" y="1072.3047">- repeating mode</text><polygon fill="#FFA500" points="687,1090.0469,845,1090.0469,855,1109.0469,845,1128.0469,687,1128.0469,677,1109.0469,687,1090.0469" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.4243" x="689" y="1106.6152">reader in state:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="154.9082" x="689" y="1121.9258">Wait For Card Insertion</text><polygon fill="#181818" points="96.0166,1135.668,86.0166,1139.668,96.0166,1143.668,92.0166,1139.668" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="407.7148" y1="1139.668" y2="1139.668"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="127.0166" y1="1168.9785" y2="1168.9785"/><line style="stroke:#181818;stroke-width:1.0;" x1="127.0166" x2="127.0166" y1="1168.9785" y2="1181.9785"/><line style="stroke:#181818;stroke-width:1.0;" x1="86.0166" x2="127.0166" y1="1181.9785" y2="1181.9785"/><polygon fill="#181818" points="96.0166,1177.9785,86.0166,1181.9785,96.0166,1185.9785,92.0166,1181.9785" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28.355" x="92.0166" y="1164.2363">wait</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.2334" x="124.4849" y="1164.2363">for card presence</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1538.9785" x="0" y="1218.2891"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1538.9785" y1="1218.2891" y2="1218.2891"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1538.9785" y1="1221.2891" y2="1221.2891"/><rect fill="#EEEEEE" height="38.6211" style="stroke:#000000;stroke-width:2.0;" width="221.3208" x="658.8289" y="1199.9785"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="204.2549" x="664.8289" y="1216.5469">Access Control operation start</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="203.0361" x="664.8289" y="1231.8574">Card selection &amp; identification</text><polygon fill="#FFA500" points="777.519,1265.9102,767.519,1269.9102,777.519,1273.9102,773.519,1269.9102" style="stroke:#FFA500;stroke-width:1.0;"/><line style="stroke:#FFA500;stroke-width:1.0;" x1="771.519" x2="942.6499" y1="1269.9102" y2="1269.9102"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27.3394" x="783.519" y="1265.168">card</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="59.979" x="814.9717" y="1265.168">insertion</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.4727" x="883.1772" y="1265.168">.  .  .  .  .</text><polygon fill="#FFA500" points="680,1282.9102,851,1282.9102,861,1301.9102,851,1320.9102,680,1320.9102,670,1301.9102,680,1282.9102" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.4243" x="682" y="1299.4785">reader in state:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="167.6099" x="682" y="1314.7891">Wait For Card Processing</text><polygon fill="#FFA500" points="424.7148,1343.8418,414.7148,1347.8418,424.7148,1351.8418,420.7148,1347.8418" style="stroke:#FFA500;stroke-width:1.0;"/><line style="stroke:#FFA500;stroke-width:1.0;" x1="418.7148" x2="765.519" y1="1347.8418" y2="1347.8418"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="59.979" x="430.7148" y="1343.0996">insertion</text><polygon fill="#0000FF" points="749.519,1403.7734,759.519,1407.7734,749.519,1411.7734,753.519,1407.7734" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="413.7148" x2="755.519" y1="1407.7734" y2="1407.7734"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.8633" x="420.7148" y="1372.4102">Card #1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.7852" x="420.7148" y="1387.7207">transmit selection request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.7837" x="453.6211" y="1403.0313">- card selector</text><polygon fill="#181818" points="1018.1665,1433.084,1028.1665,1437.084,1018.1665,1441.084,1022.1665,1437.084" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="771.519" x2="1024.1665" y1="1437.084" y2="1437.084"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.0859" x="778.519" y="1432.3418">open card channel</text><polygon fill="#181818" points="782.519,1447.084,772.519,1451.084,782.519,1455.084,778.519,1451.084" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="776.519" x2="1029.1665" y1="1451.084" y2="1451.084"/><polygon fill="#181818" points="1018.1665,1476.3945,1028.1665,1480.3945,1018.1665,1484.3945,1022.1665,1480.3945" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="771.519" x2="1024.1665" y1="1480.3945" y2="1480.3945"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.7622" x="778.519" y="1475.6523">select application (aid)</text><polygon fill="#181818" points="782.519,1505.7051,772.519,1509.7051,782.519,1513.7051,778.519,1509.7051" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="776.519" x2="1029.1665" y1="1509.7051" y2="1509.7051"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59.6172" x="788.519" y="1504.9629">[card FCI]</text><line style="stroke:#181818;stroke-width:1.0;" x1="771.519" x2="813.519" y1="1539.0156" y2="1539.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="813.519" x2="813.519" y1="1539.0156" y2="1552.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="772.519" x2="813.519" y1="1552.0156" y2="1552.0156"/><polygon fill="#181818" points="782.519,1548.0156,772.519,1552.0156,782.519,1556.0156,778.519,1552.0156" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.5889" x="778.519" y="1534.2734">checks invalidation status</text><polygon fill="#0000FF" points="424.7148,1577.3262,414.7148,1581.3262,424.7148,1585.3262,420.7148,1581.3262" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="418.7148" x2="765.519" y1="1581.3262" y2="1581.3262"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.915" x="430.7148" y="1576.584">receive selection response</text><polygon fill="#181818" points="96.0166,1606.6367,86.0166,1610.6367,96.0166,1614.6367,92.0166,1610.6367" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="407.7148" y1="1610.6367" y2="1610.6367"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="39.3047" x="102.0166" y="1605.8945">notify</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231.0737" x="145.4346" y="1605.8945">scheduled card selections responsee</text><polygon fill="#181818" points="391.7148,1635.9473,401.7148,1639.9473,391.7148,1643.9473,395.7148,1639.9473" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="397.7148" y1="1639.9473" y2="1639.9473"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37.1338" x="92.0166" y="1635.2051">parse</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223.8311" x="133.2637" y="1635.2051">scheduled card selections response</text><polygon fill="#181818" points="96.0166,1665.2578,86.0166,1669.2578,96.0166,1673.2578,92.0166,1669.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="407.7148" y1="1669.2578" y2="1669.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205.1816" x="102.0166" y="1664.5156">selected active SmartCard image</text><polygon fill="#181818" points="480.916,1694.5684,490.916,1698.5684,480.916,1702.5684,484.916,1698.5684" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="486.916" y1="1698.5684" y2="1698.5684"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27.1807" x="92.0166" y="1693.8262">cast</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80.9707" x="123.3105" y="1693.8262">Calypso card</text><polygon fill="#181818" points="96.0166,1754.5,86.0166,1758.5,96.0166,1762.5,92.0166,1758.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="496.916" y1="1758.5" y2="1758.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.8472" x="102.0166" y="1723.1367">[Calypso card image:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.0708" x="134.9229" y="1738.4473">- identification data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.4854" x="134.9229" y="1753.7578">- invalidation status]</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1538.9785" x="0" y="1787.1553"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1538.9785" y1="1787.1553" y2="1787.1553"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1538.9785" y1="1790.1553" y2="1790.1553"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="177.8394" x="680.5696" y="1776.5"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="159.5547" x="686.5696" y="1793.0684">Card secure transaction</text><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="127.0166" y1="1861.7422" y2="1861.7422"/><line style="stroke:#181818;stroke-width:1.0;" x1="127.0166" x2="127.0166" y1="1861.7422" y2="1874.7422"/><line style="stroke:#181818;stroke-width:1.0;" x1="86.0166" x2="127.0166" y1="1874.7422" y2="1874.7422"/><polygon fill="#181818" points="96.0166,1870.7422,86.0166,1874.7422,96.0166,1878.7422,92.0166,1874.7422" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="71.5889" x="92.0166" y="1826.3789">instantiate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.7642" x="167.7188" y="1826.3789">Calypso card transaction:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.1821" x="124.9229" y="1841.6895">- Calypso card resource</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.0107" x="124.9229" y="1857">- Calypso SAM resource</text><path d="M377,1887.7422 L377,1912.7422 L618,1912.7422 L618,1897.7422 L608,1887.7422 L377,1887.7422 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M608,1887.7422 L608,1897.7422 L618,1897.7422 L608,1887.7422 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220.0923" x="383" y="1905.3105">Only reads data inside the session.</text><polygon fill="#181818" points="480.916,1965.9844,490.916,1969.9844,480.916,1973.9844,484.916,1969.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="486.916" y1="1969.9844" y2="1969.9844"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="51.9238" x="92.0166" y="1934.6211">prepare</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.1328" x="148.0537" y="1934.6211">card transaction:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="266.1763" x="124.9229" y="1949.9316">- open secure session (DEBIT access level)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.8022" x="124.9229" y="1965.2422">- read environment file</text><polygon fill="#181818" points="96.0166,1979.9844,86.0166,1983.9844,96.0166,1987.9844,92.0166,1983.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="496.916" y1="1983.9844" y2="1983.9844"/><polygon fill="#181818" points="480.916,2009.2949,490.916,2013.2949,480.916,2017.2949,484.916,2013.2949" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="486.916" y1="2013.2949" y2="2013.2949"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.0635" x="92.0166" y="2008.5527">process</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77.3145" x="148.1934" y="2008.5527">commands (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32.0747" x="225.5078" y="2008.5527">keep</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.8608" x="261.6958" y="2008.5527">channel open)</text><line style="stroke:#00FF00;stroke-width:1.0;" x1="502.916" x2="544.916" y1="2079.041" y2="2079.041"/><line style="stroke:#00FF00;stroke-width:1.0;" x1="544.916" x2="544.916" y1="2079.041" y2="2092.041"/><line style="stroke:#00FF00;stroke-width:1.0;" x1="503.916" x2="544.916" y1="2092.041" y2="2092.041"/><polygon fill="#00FF00" points="513.916,2088.041,503.916,2092.041,513.916,2096.041,509.916,2092.041" style="stroke:#00FF00;stroke-width:1.0;"/><path d="M529.416,2035.0449 C529.416,2040.4296 525.0507,2044.7949 519.666,2044.7949 C514.2813,2044.7949 509.916,2040.4296 509.916,2035.0449 C509.916,2029.6602 514.2813,2025.2949 519.666,2025.2949 C525.0507,2025.2949 529.416,2029.6602 529.416,2035.0449 " fill="#FFCC4D" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><path d="M510.5877,2031.263 C510.7177,2031.3925 511.3666,2031.7814 511.4961,2032.1703 C511.6261,2032.5587 511.8861,2034.7616 512.665,2035.41 C513.4683,2036.0773 516.4983,2035.8293 517.0785,2035.54 C518.3768,2034.8927 518.5361,2033.0857 518.7658,2032.1703 C518.8952,2031.6519 519.6741,2031.6519 519.6741,2031.6519 C519.6741,2031.6519 520.4531,2031.6519 520.5831,2032.1698 C520.8127,2033.0857 520.9731,2034.8927 522.2703,2035.5395 C522.851,2035.8293 525.8811,2036.0779 526.6855,2035.4105 C527.4633,2034.7622 527.7228,2032.5592 527.8528,2032.1703 C527.9817,2031.7819 528.6317,2031.393 528.7611,2031.2635 C528.8917,2031.1341 528.8917,2030.6157 528.7611,2030.4857 C528.5017,2030.2268 525.4386,2029.996 522.1403,2030.3563 C521.4822,2030.4283 521.232,2030.6152 519.6736,2030.6152 C518.1163,2030.6152 517.865,2030.4278 517.2074,2030.3563 C513.9113,2029.9955 510.8477,2030.2263 510.5877,2030.4852 C510.4582,2030.6146 510.4582,2031.1335 510.5877,2031.263 " fill="#292F33" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><path d="M524.7225,2038.094 C524.6261,2038.0068 524.482,2038.0013 524.3785,2038.0783 C524.3574,2038.094 522.2541,2039.6491 519.666,2039.6491 C517.0844,2039.6491 514.9741,2038.094 514.9535,2038.0783 C514.8501,2038.0013 514.706,2038.0078 514.6096,2038.094 C514.5137,2038.1806 514.492,2038.3236 514.5586,2038.4341 C514.6285,2038.5506 516.3012,2041.2741 519.666,2041.2741 C523.0308,2041.2741 524.7041,2038.5506 524.7734,2038.4341 C524.84,2038.3231 524.8189,2038.1806 524.7225,2038.094 " fill="#664500" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186.9766" x="533.5293" y="2043.6777">SAM challenge already known</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177.8677" x="509.916" y="2058.9883">no need to request it during</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.3057" x="509.916" y="2074.2988">the card transaction</text><polygon fill="#0000FF" points="749.519,2147.9727,759.519,2151.9727,749.519,2155.9727,753.519,2151.9727" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="502.916" x2="755.519" y1="2151.9727" y2="2151.9727"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.8633" x="509.916" y="2116.6094">Card #2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.9224" x="509.916" y="2131.9199">transmit card request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.6528" x="542.8223" y="2147.2305">- APDU list</text><path d="M526,2166.9727 L820.8818,2166.9727 L820.8818,2174.2832 L810.8818,2184.2832 L526,2184.2832 L526,2166.9727 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="147.6777" style="stroke:#000000;stroke-width:1.5;" width="543.6665" x="526" y="2166.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="249.8818" x="541" y="2180.541">Card APDU commands inside session</text><path d="M536,2189.2832 L536,2220.2832 L995,2220.2832 L995,2199.2832 L985,2189.2832 L536,2189.2832 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M985,2189.2832 L985,2199.2832 L995,2199.2832 L985,2189.2832 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M561.5,2204.0332 C561.5,2209.4179 557.1347,2213.7832 551.75,2213.7832 C546.3653,2213.7832 542,2209.4179 542,2204.0332 C542,2198.6485 546.3653,2194.2832 551.75,2194.2832 C557.1347,2194.2832 561.5,2198.6485 561.5,2204.0332 " fill="#FFCC4D" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><path d="M542.6717,2200.2513 C542.8017,2200.3807 543.4506,2200.7697 543.58,2201.1586 C543.71,2201.547 543.97,2203.7499 544.749,2204.3983 C545.5523,2205.0656 548.5823,2204.8175 549.1625,2204.5283 C550.4608,2203.881 550.6201,2202.074 550.8498,2201.1586 C550.9792,2200.6402 551.7581,2200.6402 551.7581,2200.6402 C551.7581,2200.6402 552.537,2200.6402 552.667,2201.158 C552.8967,2202.074 553.057,2203.881 554.3543,2204.5277 C554.935,2204.8175 557.9651,2205.0662 558.7695,2204.3988 C559.5473,2203.7505 559.8068,2201.5475 559.9368,2201.1586 C560.0657,2200.7702 560.7157,2200.3813 560.8451,2200.2518 C560.9757,2200.1224 560.9757,2199.604 560.8451,2199.474 C560.5857,2199.2151 557.5225,2198.9843 554.2243,2199.3445 C553.5662,2199.4166 553.316,2199.6035 551.7576,2199.6035 C550.2003,2199.6035 549.949,2199.416 549.2914,2199.3445 C545.9953,2198.9838 542.9317,2199.2145 542.6717,2199.4735 C542.5422,2199.6029 542.5422,2200.1218 542.6717,2200.2513 " fill="#292F33" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><path d="M556.8065,2207.0822 C556.71,2206.995 556.566,2206.9896 556.4625,2207.0665 C556.4414,2207.0822 554.3381,2208.6374 551.75,2208.6374 C549.1684,2208.6374 547.0581,2207.0822 547.0375,2207.0665 C546.934,2206.9896 546.79,2206.9961 546.6935,2207.0822 C546.5977,2207.1689 546.576,2207.3119 546.6426,2207.4224 C546.7125,2207.5389 548.3852,2210.2624 551.75,2210.2624 C555.1148,2210.2624 556.788,2207.5389 556.8574,2207.4224 C556.924,2207.3114 556.9029,2207.1689 556.8065,2207.0822 " fill="#664500" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="415.0542" x="565.6133" y="2212.666">Optimization: environment file read through the session opening.</text><polygon fill="#181818" points="1018.1665,2273.3398,1028.1665,2277.3398,1018.1665,2281.3398,1022.1665,2277.3398" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="771.519" x2="1024.1665" y1="2277.3398" y2="2277.3398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229.6772" x="778.519" y="2241.9766">open secure session (card debit key,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.4751" x="811.4253" y="2257.2871">SAM challenge,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.5337" x="811.4253" y="2272.5977">SFI environment to read)</text><polygon fill="#181818" points="782.519,2302.6504,772.519,2306.6504,782.519,2310.6504,778.519,2306.6504" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="776.519" x2="1029.1665" y1="2306.6504" y2="2306.6504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228.2744" x="788.519" y="2301.9082">[card challenge &amp; environment data]</text><polygon fill="#0000FF" points="513.916,2338.9609,503.916,2342.9609,513.916,2346.9609,509.916,2342.9609" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="507.916" x2="765.519" y1="2342.9609" y2="2342.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.9883" x="519.916" y="2338.2188">[card challenge]</text><line style="stroke:#181818;stroke-width:1.0;" x1="502.916" x2="544.916" y1="2372.2715" y2="2372.2715"/><line style="stroke:#181818;stroke-width:1.0;" x1="544.916" x2="544.916" y1="2372.2715" y2="2385.2715"/><line style="stroke:#181818;stroke-width:1.0;" x1="503.916" x2="544.916" y1="2385.2715" y2="2385.2715"/><polygon fill="#181818" points="513.916,2381.2715,503.916,2385.2715,513.916,2389.2715,509.916,2385.2715" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.4727" x="509.916" y="2367.5293">checks ratification status</text><polygon fill="#B0E0E6" points="992,2398.2715,1078,2398.2715,1088,2417.2715,1078,2436.2715,992,2436.2715,982,2417.2715,992,2398.2715" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82.2783" x="994" y="2414.8398">card in state:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="48.896" x="994" y="2430.1504">ratified</text><polygon fill="#181818" points="96.0166,2520.4453,86.0166,2524.4453,96.0166,2528.4453,92.0166,2524.4453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="496.916" y1="2524.4453" y2="2524.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.8472" x="102.0166" y="2458.4609">[Calypso card image:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.0708" x="134.9229" y="2473.7715">- identification data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.2578" x="134.9229" y="2489.082">- invalidation status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.6304" x="134.9229" y="2504.3926">- environment data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.3691" x="134.9229" y="2519.7031">- ratification status]</text><polygon fill="#181818" points="480.916,2565.0664,490.916,2569.0664,480.916,2573.0664,484.916,2569.0664" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="486.916" y1="2569.0664" y2="2569.0664"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="51.9238" x="92.0166" y="2549.0137">prepare</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.1328" x="148.0537" y="2549.0137">card transaction:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.3555" x="124.9229" y="2564.3242">- read last event</text><polygon fill="#181818" points="96.0166,2579.0664,86.0166,2583.0664,96.0166,2587.0664,92.0166,2583.0664" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="496.916" y1="2583.0664" y2="2583.0664"/><polygon fill="#181818" points="480.916,2608.377,490.916,2612.377,480.916,2616.377,484.916,2612.377" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="486.916" y1="2612.377" y2="2612.377"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.0635" x="92.0166" y="2607.6348">process</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77.3145" x="148.1934" y="2607.6348">commands (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32.0747" x="225.5078" y="2607.6348">keep</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.8608" x="261.6958" y="2607.6348">channel open)</text><polygon fill="#0000FF" points="749.519,2668.3086,759.519,2672.3086,749.519,2676.3086,753.519,2672.3086" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="502.916" x2="755.519" y1="2672.3086" y2="2672.3086"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.8633" x="509.916" y="2636.9453">Card #3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.9224" x="509.916" y="2652.2559">transmit card request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.6528" x="542.8223" y="2667.5664">- APDU list</text><path d="M704.6616,2687.3086 L999.5435,2687.3086 L999.5435,2694.6191 L989.5435,2704.6191 L704.6616,2704.6191 L704.6616,2687.3086 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="365.0049" x="704.6616" y="2687.3086"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="249.8818" x="719.6616" y="2700.877">Card APDU commands inside session</text><polygon fill="#181818" points="1018.1665,2721.9297,1028.1665,2725.9297,1018.1665,2729.9297,1022.1665,2725.9297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="771.519" x2="1024.1665" y1="2725.9297" y2="2725.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145.9961" x="778.519" y="2721.1875">read record (last event)</text><polygon fill="#181818" points="782.519,2751.2402,772.519,2755.2402,782.519,2759.2402,778.519,2755.2402" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="776.519" x2="1029.1665" y1="2755.2402" y2="2755.2402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.6548" x="788.519" y="2750.498">[last event data]</text><polygon fill="#0000FF" points="513.916,2787.5508,503.916,2791.5508,513.916,2795.5508,509.916,2791.5508" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="507.916" x2="765.519" y1="2791.5508" y2="2791.5508"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.6548" x="519.916" y="2786.8086">[last event data]</text><polygon fill="#181818" points="96.0166,2893.4141,86.0166,2897.4141,96.0166,2901.4141,92.0166,2897.4141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="496.916" y1="2897.4141" y2="2897.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.8472" x="102.0166" y="2816.1191">[Calypso card image:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.0708" x="134.9229" y="2831.4297">- identification data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.2578" x="134.9229" y="2846.7402">- invalidation status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.6304" x="134.9229" y="2862.0508">- environment data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.1416" x="134.9229" y="2877.3613">- ratification status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.0625" x="134.9229" y="2892.6719">- last event data]</text><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="127.0166" y1="2926.7246" y2="2926.7246"/><line style="stroke:#181818;stroke-width:1.0;" x1="127.0166" x2="127.0166" y1="2926.7246" y2="2939.7246"/><line style="stroke:#181818;stroke-width:1.0;" x1="86.0166" x2="127.0166" y1="2939.7246" y2="2939.7246"/><polygon fill="#181818" points="96.0166,2935.7246,86.0166,2939.7246,96.0166,2943.7246,92.0166,2939.7246" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217.2739" x="92.0166" y="2921.9824">checks transaction recovery status</text><polygon fill="#181818" points="480.916,2980.3457,490.916,2984.3457,480.916,2988.3457,484.916,2984.3457" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="486.916" y1="2984.3457" y2="2984.3457"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="51.9238" x="92.0166" y="2964.293">prepare</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.1328" x="148.0537" y="2964.293">card transaction:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118.3838" x="124.9229" y="2979.6035">- read contract list</text><polygon fill="#181818" points="96.0166,2994.3457,86.0166,2998.3457,96.0166,3002.3457,92.0166,2998.3457" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="496.916" y1="2998.3457" y2="2998.3457"/><polygon fill="#181818" points="480.916,3023.6563,490.916,3027.6563,480.916,3031.6563,484.916,3027.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="486.916" y1="3027.6563" y2="3027.6563"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.0635" x="92.0166" y="3022.9141">process</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77.3145" x="148.1934" y="3022.9141">commands (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32.0747" x="225.5078" y="3022.9141">keep</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.8608" x="261.6958" y="3022.9141">channel open)</text><polygon fill="#0000FF" points="749.519,3083.5879,759.519,3087.5879,749.519,3091.5879,753.519,3087.5879" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="502.916" x2="755.519" y1="3087.5879" y2="3087.5879"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.8633" x="509.916" y="3052.2246">Card #4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.9224" x="509.916" y="3067.5352">transmit card request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.6528" x="542.8223" y="3082.8457">- APDU list</text><path d="M704.6616,3102.5879 L999.5435,3102.5879 L999.5435,3109.8984 L989.5435,3119.8984 L704.6616,3119.8984 L704.6616,3102.5879 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="365.0049" x="704.6616" y="3102.5879"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="249.8818" x="719.6616" y="3116.1563">Card APDU commands inside session</text><polygon fill="#181818" points="1018.1665,3137.209,1028.1665,3141.209,1018.1665,3145.209,1022.1665,3141.209" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="771.519" x2="1024.1665" y1="3141.209" y2="3141.209"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.0244" x="778.519" y="3136.4668">read record (contract list)</text><polygon fill="#181818" points="782.519,3166.5195,772.519,3170.5195,782.519,3174.5195,778.519,3170.5195" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="776.519" x2="1029.1665" y1="3170.5195" y2="3170.5195"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.6831" x="788.519" y="3165.7773">[contract list data]</text><polygon fill="#0000FF" points="513.916,3202.8301,503.916,3206.8301,513.916,3210.8301,509.916,3206.8301" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="507.916" x2="765.519" y1="3206.8301" y2="3206.8301"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.6831" x="519.916" y="3202.0879">[contract list data]</text><polygon fill="#181818" points="96.0166,3324.0039,86.0166,3328.0039,96.0166,3332.0039,92.0166,3328.0039" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="496.916" y1="3328.0039" y2="3328.0039"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.8472" x="102.0166" y="3231.3984">[Calypso card image:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.0708" x="134.9229" y="3246.709">- identification data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.2578" x="134.9229" y="3262.0195">- invalidation status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.6304" x="134.9229" y="3277.3301">- environment data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.1416" x="134.9229" y="3292.6406">- ratification status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.835" x="134.9229" y="3307.9512">- last event data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.0908" x="134.9229" y="3323.2617">- contract list data]</text><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="127.0166" y1="3357.3145" y2="3357.3145"/><line style="stroke:#181818;stroke-width:1.0;" x1="127.0166" x2="127.0166" y1="3357.3145" y2="3370.3145"/><line style="stroke:#181818;stroke-width:1.0;" x1="86.0166" x2="127.0166" y1="3370.3145" y2="3370.3145"/><polygon fill="#181818" points="96.0166,3366.3145,86.0166,3370.3145,96.0166,3374.3145,92.0166,3370.3145" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.9849" x="92.0166" y="3352.5723">identifies contract</text><polygon fill="#181818" points="480.916,3410.9355,490.916,3414.9355,480.916,3418.9355,484.916,3414.9355" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="486.916" y1="3414.9355" y2="3414.9355"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="51.9238" x="92.0166" y="3394.8828">prepare</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.1328" x="148.0537" y="3394.8828">card transaction:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.5718" x="124.9229" y="3410.1934">- read contract #x</text><polygon fill="#181818" points="96.0166,3424.9355,86.0166,3428.9355,96.0166,3432.9355,92.0166,3428.9355" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="496.916" y1="3428.9355" y2="3428.9355"/><polygon fill="#181818" points="480.916,3454.2461,490.916,3458.2461,480.916,3462.2461,484.916,3458.2461" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="486.916" y1="3458.2461" y2="3458.2461"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.0635" x="92.0166" y="3453.5039">process</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77.3145" x="148.1934" y="3453.5039">commands (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32.0747" x="225.5078" y="3453.5039">keep</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.8608" x="261.6958" y="3453.5039">channel open)</text><polygon fill="#0000FF" points="749.519,3514.1777,759.519,3518.1777,749.519,3522.1777,753.519,3518.1777" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="502.916" x2="755.519" y1="3518.1777" y2="3518.1777"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.8633" x="509.916" y="3482.8145">Card #5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.9224" x="509.916" y="3498.125">transmit card request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.6528" x="542.8223" y="3513.4355">- APDU list</text><path d="M704.6616,3533.1777 L999.5435,3533.1777 L999.5435,3540.4883 L989.5435,3550.4883 L704.6616,3550.4883 L704.6616,3533.1777 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="365.0049" x="704.6616" y="3533.1777"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="249.8818" x="719.6616" y="3546.7461">Card APDU commands inside session</text><polygon fill="#181818" points="1018.1665,3567.7988,1028.1665,3571.7988,1018.1665,3575.7988,1022.1665,3571.7988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="771.519" x2="1024.1665" y1="3571.7988" y2="3571.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.2124" x="778.519" y="3567.0566">read record (contract #x)</text><polygon fill="#181818" points="782.519,3597.1094,772.519,3601.1094,782.519,3605.1094,778.519,3601.1094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="776.519" x2="1029.1665" y1="3601.1094" y2="3601.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.8711" x="788.519" y="3596.3672">[contract #x data]</text><polygon fill="#0000FF" points="513.916,3633.4199,503.916,3637.4199,513.916,3641.4199,509.916,3637.4199" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="507.916" x2="765.519" y1="3637.4199" y2="3637.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.8711" x="519.916" y="3632.6777">[contract #x data]</text><polygon fill="#181818" points="96.0166,3769.9043,86.0166,3773.9043,96.0166,3777.9043,92.0166,3773.9043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="496.916" y1="3773.9043" y2="3773.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.8472" x="102.0166" y="3661.9883">[Calypso card image:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.0708" x="134.9229" y="3677.2988">- identification data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.2578" x="134.9229" y="3692.6094">- invalidation status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.6304" x="134.9229" y="3707.9199">- environment data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.1416" x="134.9229" y="3723.2305">- ratification status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.835" x="134.9229" y="3738.541">- last event data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.8633" x="134.9229" y="3753.8516">- contract list data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.2788" x="134.9229" y="3769.1621">- contract #x data]</text><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="127.0166" y1="3803.2148" y2="3803.2148"/><line style="stroke:#181818;stroke-width:1.0;" x1="127.0166" x2="127.0166" y1="3803.2148" y2="3816.2148"/><line style="stroke:#181818;stroke-width:1.0;" x1="86.0166" x2="127.0166" y1="3816.2148" y2="3816.2148"/><polygon fill="#181818" points="96.0166,3812.2148,86.0166,3816.2148,96.0166,3820.2148,92.0166,3816.2148" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.0098" x="92.0166" y="3798.4727">identifies associated counter</text><polygon fill="#181818" points="480.916,3856.8359,490.916,3860.8359,480.916,3864.8359,484.916,3860.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="486.916" y1="3860.8359" y2="3860.8359"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="51.9238" x="92.0166" y="3840.7832">prepare</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.1328" x="148.0537" y="3840.7832">card transaction:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.7441" x="124.9229" y="3856.0938">- reader counter #x</text><polygon fill="#181818" points="96.0166,3870.8359,86.0166,3874.8359,96.0166,3878.8359,92.0166,3874.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="496.916" y1="3874.8359" y2="3874.8359"/><polygon fill="#181818" points="480.916,3900.1465,490.916,3904.1465,480.916,3908.1465,484.916,3904.1465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="486.916" y1="3904.1465" y2="3904.1465"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.0635" x="92.0166" y="3899.4043">process</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77.3145" x="148.1934" y="3899.4043">commands (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32.0747" x="225.5078" y="3899.4043">keep</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.8608" x="261.6958" y="3899.4043">channel open)</text><polygon fill="#0000FF" points="749.519,3960.0781,759.519,3964.0781,749.519,3968.0781,753.519,3964.0781" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="502.916" x2="755.519" y1="3964.0781" y2="3964.0781"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.8633" x="509.916" y="3928.7148">Card #6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.9224" x="509.916" y="3944.0254">transmit card request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.6528" x="542.8223" y="3959.3359">- APDU list</text><path d="M704.6616,3979.0781 L999.5435,3979.0781 L999.5435,3986.3887 L989.5435,3996.3887 L704.6616,3996.3887 L704.6616,3979.0781 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="365.0049" x="704.6616" y="3979.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="249.8818" x="719.6616" y="3992.6465">Card APDU commands inside session</text><polygon fill="#181818" points="1018.1665,4013.6992,1028.1665,4017.6992,1018.1665,4021.6992,1022.1665,4017.6992" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="771.519" x2="1024.1665" y1="4017.6992" y2="4017.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.8228" x="778.519" y="4012.957">read record (counter #x)</text><polygon fill="#181818" points="782.519,4043.0098,772.519,4047.0098,782.519,4051.0098,778.519,4047.0098" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="776.519" x2="1029.1665" y1="4047.0098" y2="4047.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.729" x="788.519" y="4042.2676">[counter #1 data]</text><polygon fill="#0000FF" points="513.916,4079.3203,503.916,4083.3203,513.916,4087.3203,509.916,4083.3203" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="507.916" x2="765.519" y1="4083.3203" y2="4083.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.9883" x="519.916" y="4078.5781">[card challenge]</text><polygon fill="#181818" points="96.0166,4231.1152,86.0166,4235.1152,96.0166,4239.1152,92.0166,4235.1152" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="496.916" y1="4235.1152" y2="4235.1152"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.8472" x="102.0166" y="4107.8887">[Calypso card image:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.0708" x="134.9229" y="4123.1992">- identification data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.2578" x="134.9229" y="4138.5098">- invalidation status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.6304" x="134.9229" y="4153.8203">- environment data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.1416" x="134.9229" y="4169.1309">- ratification status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.835" x="134.9229" y="4184.4414">- last event data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.8633" x="134.9229" y="4199.752">- contract list data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.0513" x="134.9229" y="4215.0625">- contract #x data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.8892" x="134.9229" y="4230.373">- counter #x data]</text><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="127.0166" y1="4264.4258" y2="4264.4258"/><line style="stroke:#181818;stroke-width:1.0;" x1="127.0166" x2="127.0166" y1="4264.4258" y2="4277.4258"/><line style="stroke:#181818;stroke-width:1.0;" x1="86.0166" x2="127.0166" y1="4277.4258" y2="4277.4258"/><polygon fill="#181818" points="96.0166,4273.4258,86.0166,4277.4258,96.0166,4281.4258,92.0166,4277.4258" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.2065" x="92.0166" y="4259.6836">defines data to update</text><polygon fill="#181818" points="480.916,4348.668,490.916,4352.668,480.916,4356.668,484.916,4352.668" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="486.916" y1="4352.668" y2="4352.668"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="51.9238" x="92.0166" y="4301.9941">prepare</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1133" x="143.9404" y="4301.9941">:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214.938" x="124.9229" y="4317.3047">- decrease counter #x (new value)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217.9023" x="124.9229" y="4332.6152">- append event record (new event)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222.9043" x="124.9229" y="4347.9258">- close secure session (not ratified)</text><polygon fill="#181818" points="96.0166,4362.668,86.0166,4366.668,96.0166,4370.668,92.0166,4366.668" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="496.916" y1="4366.668" y2="4366.668"/><polygon fill="#181818" points="480.916,4391.9785,490.916,4395.9785,480.916,4399.9785,484.916,4395.9785" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="486.916" y1="4395.9785" y2="4395.9785"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.0635" x="92.0166" y="4391.2363">process</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77.3145" x="148.1934" y="4391.2363">commands (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.417" x="225.5078" y="4391.2363">close</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86.7661" x="264.0381" y="4391.2363">channel after)</text><line style="stroke:#181818;stroke-width:1.0;" x1="502.916" x2="544.916" y1="4425.2891" y2="4425.2891"/><line style="stroke:#181818;stroke-width:1.0;" x1="544.916" x2="544.916" y1="4425.2891" y2="4438.2891"/><line style="stroke:#181818;stroke-width:1.0;" x1="503.916" x2="544.916" y1="4438.2891" y2="4438.2891"/><polygon fill="#181818" points="513.916,4434.2891,503.916,4438.2891,513.916,4442.2891,509.916,4438.2891" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234.603" x="509.916" y="4420.5469">anticipates the future card responses</text><path d="M140,4451.2891 L140,4491.2891 L854,4491.2891 L854,4461.2891 L844,4451.2891 L140,4451.2891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M844,4451.2891 L844,4461.2891 L854,4461.2891 L844,4451.2891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="267.2744" x="146" y="4468.8574">If the current value of the counter #x were</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="61.896" x="417.3877" y="4468.8574">unknown</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="319.6108" x="479.2837" y="4468.8574">, then the transmission of an additional card APDU</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="693.856" x="146" y="4484.168">message would be necessary to operate the decrease counter in a different message than the session closing.</text><polygon fill="#00FF00" points="1214.1885,4544.8418,1224.1885,4548.8418,1214.1885,4552.8418,1218.1885,4548.8418" style="stroke:#00FF00;stroke-width:1.0;"/><line style="stroke:#00FF00;stroke-width:1.0;" x1="502.916" x2="1220.1885" y1="4548.8418" y2="4548.8418"/><text fill="#008000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="50.2354" x="509.916" y="4513.4785">SAM #1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.9224" x="509.916" y="4528.7891">transmit card request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.6528" x="542.8223" y="4544.0996">- APDU list</text><path d="M992,4561.8418 L992,4592.8418 L1468,4592.8418 L1468,4571.8418 L1458,4561.8418 L992,4561.8418 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1458,4561.8418 L1458,4571.8418 L1468,4571.8418 L1458,4561.8418 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1017.5,4576.5918 C1017.5,4581.9765 1013.1347,4586.3418 1007.75,4586.3418 C1002.3653,4586.3418 998,4581.9765 998,4576.5918 C998,4571.2071 1002.3653,4566.8418 1007.75,4566.8418 C1013.1347,4566.8418 1017.5,4571.2071 1017.5,4576.5918 " fill="#FFCC4D" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><path d="M998.6717,4572.8099 C998.8017,4572.9393 999.4506,4573.3283 999.58,4573.7172 C999.71,4574.1055 999.97,4576.3085 1000.749,4576.9569 C1001.5523,4577.6242 1004.5823,4577.3761 1005.1625,4577.0869 C1006.4608,4576.4396 1006.6201,4574.6326 1006.8498,4573.7172 C1006.9792,4573.1988 1007.7581,4573.1988 1007.7581,4573.1988 C1007.7581,4573.1988 1008.537,4573.1988 1008.667,4573.7166 C1008.8967,4574.6326 1009.057,4576.4396 1010.3543,4577.0863 C1010.935,4577.3761 1013.9651,4577.6248 1014.7695,4576.9574 C1015.5473,4576.309 1015.8068,4574.1061 1015.9368,4573.7172 C1016.0657,4573.3288 1016.7157,4572.9399 1016.8451,4572.8104 C1016.9757,4572.681 1016.9757,4572.1626 1016.8451,4572.0326 C1016.5857,4571.7737 1013.5225,4571.5429 1010.2243,4571.9031 C1009.5662,4571.9752 1009.316,4572.162 1007.7576,4572.162 C1006.2003,4572.162 1005.949,4571.9746 1005.2914,4571.9031 C1001.9953,4571.5424 998.9317,4571.7731 998.6717,4572.032 C998.5422,4572.1615 998.5422,4572.6804 998.6717,4572.8099 " fill="#292F33" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><path d="M1012.8065,4579.6408 C1012.71,4579.5536 1012.566,4579.5482 1012.4625,4579.6251 C1012.4414,4579.6408 1010.3381,4581.196 1007.75,4581.196 C1005.1684,4581.196 1003.0581,4579.6408 1003.0375,4579.6251 C1002.934,4579.5482 1002.79,4579.5547 1002.6935,4579.6408 C1002.5977,4579.7275 1002.576,4579.8705 1002.6426,4579.981 C1002.7125,4580.0975 1004.3852,4582.821 1007.75,4582.821 C1011.1148,4582.821 1012.788,4580.0975 1012.8574,4579.981 C1012.924,4579.87 1012.9029,4579.7275 1012.8065,4579.6408 " fill="#664500" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="431.9453" x="1021.6133" y="4585.2246">All card session data managed within a single SAM command group.</text><polygon fill="#181818" points="1477.4785,4615.2773,1487.4785,4619.2773,1477.4785,4623.2773,1481.4785,4619.2773" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1236.1885" x2="1483.4785" y1="4619.2773" y2="4619.2773"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.124" x="1243.1885" y="4614.5352">select diversifier (card serial)</text><polygon fill="#181818" points="1247.1885,4629.2773,1237.1885,4633.2773,1247.1885,4637.2773,1243.1885,4633.2773" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1241.1885" x2="1488.4785" y1="4633.2773" y2="4633.2773"/><polygon fill="#181818" points="1477.4785,4658.5879,1487.4785,4662.5879,1477.4785,4666.5879,1481.4785,4662.5879" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1236.1885" x2="1483.4785" y1="4662.5879" y2="4662.5879"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.8311" x="1243.1885" y="4657.8457">digest init (opening data)</text><polygon fill="#181818" points="1247.1885,4672.5879,1237.1885,4676.5879,1247.1885,4680.5879,1243.1885,4676.5879" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1241.1885" x2="1488.4785" y1="4676.5879" y2="4676.5879"/><polygon fill="#181818" points="1477.4785,4701.8984,1487.4785,4705.8984,1477.4785,4709.8984,1481.4785,4705.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1236.1885" x2="1483.4785" y1="4705.8984" y2="4705.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.6914" x="1243.1885" y="4701.1563">digest update (read environment)</text><polygon fill="#181818" points="1247.1885,4715.8984,1237.1885,4719.8984,1247.1885,4723.8984,1243.1885,4719.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1241.1885" x2="1488.4785" y1="4719.8984" y2="4719.8984"/><polygon fill="#181818" points="1477.4785,4745.209,1487.4785,4749.209,1477.4785,4753.209,1481.4785,4749.209" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1236.1885" x2="1483.4785" y1="4749.209" y2="4749.209"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.8594" x="1243.1885" y="4744.4668">digest update (last event)</text><polygon fill="#181818" points="1247.1885,4759.209,1237.1885,4763.209,1247.1885,4767.209,1243.1885,4763.209" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1241.1885" x2="1488.4785" y1="4763.209" y2="4763.209"/><polygon fill="#181818" points="1477.4785,4788.5195,1487.4785,4792.5195,1477.4785,4796.5195,1481.4785,4792.5195" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1236.1885" x2="1483.4785" y1="4792.5195" y2="4792.5195"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205.9243" x="1243.1885" y="4787.7773">digest update (read contract list)</text><polygon fill="#181818" points="1247.1885,4802.5195,1237.1885,4806.5195,1247.1885,4810.5195,1243.1885,4806.5195" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1241.1885" x2="1488.4785" y1="4806.5195" y2="4806.5195"/><polygon fill="#181818" points="1477.4785,4831.8301,1487.4785,4835.8301,1477.4785,4839.8301,1481.4785,4835.8301" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1236.1885" x2="1483.4785" y1="4835.8301" y2="4835.8301"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203.1123" x="1243.1885" y="4831.0879">digest update (read contract #x)</text><polygon fill="#181818" points="1247.1885,4845.8301,1237.1885,4849.8301,1247.1885,4853.8301,1243.1885,4849.8301" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1241.1885" x2="1488.4785" y1="4849.8301" y2="4849.8301"/><polygon fill="#181818" points="1477.4785,4875.1406,1487.4785,4879.1406,1477.4785,4883.1406,1481.4785,4879.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1236.1885" x2="1483.4785" y1="4879.1406" y2="4879.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186.0435" x="1243.1885" y="4874.3984">digest update (read counters)</text><polygon fill="#181818" points="1247.1885,4889.1406,1237.1885,4893.1406,1247.1885,4897.1406,1243.1885,4893.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1241.1885" x2="1488.4785" y1="4893.1406" y2="4893.1406"/><path d="M1170.6812,4908.1406 L1464.4014,4908.1406 L1464.4014,4921.2656 L1454.4014,4931.2656 L1170.6812,4931.2656 L1170.6812,4908.1406 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="109.7461" style="stroke:#000000;stroke-width:1.5;" width="358.2974" x="1170.6812" y="4908.1406"/><path d="M1205.1812,4918.8906 C1205.1812,4924.2753 1200.8159,4928.6406 1195.4312,4928.6406 C1190.0464,4928.6406 1185.6812,4924.2753 1185.6812,4918.8906 C1185.6812,4913.5059 1190.0464,4909.1406 1195.4312,4909.1406 C1200.8159,4909.1406 1205.1812,4913.5059 1205.1812,4918.8906 " fill="#FFCC4D" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><path d="M1186.3528,4915.1087 C1186.4828,4915.2382 1187.1317,4915.6271 1187.2612,4916.016 C1187.3912,4916.4044 1187.6512,4918.6073 1188.4301,4919.2557 C1189.2334,4919.923 1192.2635,4919.675 1192.8436,4919.3857 C1194.142,4918.7384 1194.3012,4916.9314 1194.5309,4916.016 C1194.6604,4915.4976 1195.4393,4915.4976 1195.4393,4915.4976 C1195.4393,4915.4976 1196.2182,4915.4976 1196.3482,4916.0155 C1196.5779,4916.9314 1196.7382,4918.7384 1198.0355,4919.3852 C1198.6162,4919.675 1201.6462,4919.9236 1202.4506,4919.2563 C1203.2284,4918.6079 1203.4879,4916.4049 1203.6179,4916.016 C1203.7468,4915.6276 1204.3968,4915.2387 1204.5263,4915.1093 C1204.6568,4914.9798 1204.6568,4914.4614 1204.5263,4914.3314 C1204.2668,4914.0725 1201.2037,4913.8418 1197.9055,4914.202 C1197.2474,4914.274 1196.9971,4914.4609 1195.4387,4914.4609 C1193.8814,4914.4609 1193.6301,4914.2735 1192.9725,4914.202 C1189.6765,4913.8412 1186.6128,4914.072 1186.3528,4914.3309 C1186.2234,4914.4603 1186.2234,4914.9793 1186.3528,4915.1087 " fill="#292F33" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><path d="M1200.4876,4921.9397 C1200.3912,4921.8525 1200.2471,4921.847 1200.1437,4921.924 C1200.1225,4921.9397 1198.0192,4923.4948 1195.4312,4923.4948 C1192.8496,4923.4948 1190.7392,4921.9397 1190.7187,4921.924 C1190.6152,4921.847 1190.4711,4921.8535 1190.3747,4921.9397 C1190.2788,4922.0263 1190.2572,4922.1693 1190.3238,4922.2798 C1190.3937,4922.3963 1192.0663,4925.1198 1195.4312,4925.1198 C1198.796,4925.1198 1200.4692,4922.3963 1200.5385,4922.2798 C1200.6052,4922.1688 1200.584,4922.0263 1200.4876,4921.9397 " fill="#664500" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.2847" x="1205.1812" y="4927.5234">&#160;</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="74.5786" x="1209.4658" y="4927.5234">anticipated</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="146.0723" x="1288.3291" y="4927.5234">Card APDU responses</text><polygon fill="#181818" points="1477.4785,4948.5762,1487.4785,4952.5762,1477.4785,4956.5762,1481.4785,4952.5762" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1236.1885" x2="1483.4785" y1="4952.5762" y2="4952.5762"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207.1875" x="1243.1885" y="4947.834">digest update (decrease counter)</text><polygon fill="#181818" points="1247.1885,4962.5762,1237.1885,4966.5762,1247.1885,4970.5762,1243.1885,4966.5762" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1241.1885" x2="1488.4785" y1="4966.5762" y2="4966.5762"/><polygon fill="#181818" points="1477.4785,4991.8867,1487.4785,4995.8867,1477.4785,4999.8867,1481.4785,4995.8867" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1236.1885" x2="1483.4785" y1="4995.8867" y2="4995.8867"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229.29" x="1243.1885" y="4991.1445">digest update (append event record)</text><polygon fill="#181818" points="1247.1885,5005.8867,1237.1885,5009.8867,1247.1885,5013.8867,1243.1885,5009.8867" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1241.1885" x2="1488.4785" y1="5009.8867" y2="5009.8867"/><polygon fill="#181818" points="1477.4785,5042.1973,1487.4785,5046.1973,1477.4785,5050.1973,1481.4785,5046.1973" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1236.1885" x2="1483.4785" y1="5046.1973" y2="5046.1973"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.1626" x="1243.1885" y="5041.4551">digest close</text><polygon fill="#181818" points="1247.1885,5071.5078,1237.1885,5075.5078,1247.1885,5079.5078,1243.1885,5075.5078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1241.1885" x2="1488.4785" y1="5075.5078" y2="5075.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.0576" x="1253.1885" y="5070.7656">[SAM certificate]</text><polygon fill="#00FF00" points="513.916,5100.8184,503.916,5104.8184,513.916,5108.8184,509.916,5104.8184" style="stroke:#00FF00;stroke-width:1.0;"/><line style="stroke:#00FF00;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="507.916" x2="1230.1885" y1="5104.8184" y2="5104.8184"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.0576" x="519.916" y="5100.0762">[SAM certificate]</text><polygon fill="#0000FF" points="749.519,5160.75,759.519,5164.75,749.519,5168.75,753.519,5164.75" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="502.916" x2="755.519" y1="5164.75" y2="5164.75"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.8633" x="509.916" y="5129.3867">Card #7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.9224" x="509.916" y="5144.6973">transmit card request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.6528" x="542.8223" y="5160.0078">- APDU list</text><path d="M704.6616,5179.75 L999.5435,5179.75 L999.5435,5187.0605 L989.5435,5197.0605 L704.6616,5197.0605 L704.6616,5179.75 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="119.2422" style="stroke:#000000;stroke-width:1.5;" width="365.0049" x="704.6616" y="5179.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="249.8818" x="719.6616" y="5193.3184">Card APDU commands inside session</text><polygon fill="#181818" points="1018.1665,5214.3711,1028.1665,5218.3711,1018.1665,5222.3711,1022.1665,5218.3711" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="771.519" x2="1024.1665" y1="5218.3711" y2="5218.3711"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230.5405" x="778.519" y="5213.6289">decrease counter (counter #1, value)</text><polygon fill="#181818" points="782.519,5243.6816,772.519,5247.6816,782.519,5251.6816,778.519,5247.6816" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="776.519" x2="1029.1665" y1="5247.6816" y2="5247.6816"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.189" x="788.519" y="5242.9395">[new counter value]</text><polygon fill="#181818" points="1018.1665,5272.9922,1028.1665,5276.9922,1018.1665,5280.9922,1022.1665,5276.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="771.519" x2="1024.1665" y1="5276.9922" y2="5276.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.1987" x="778.519" y="5272.25">append record (event, data)</text><polygon fill="#181818" points="782.519,5286.9922,772.519,5290.9922,782.519,5294.9922,778.519,5290.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="776.519" x2="1029.1665" y1="5290.9922" y2="5290.9922"/><polygon fill="#181818" points="1018.1665,5338.6133,1028.1665,5342.6133,1018.1665,5346.6133,1022.1665,5342.6133" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="771.519" x2="1024.1665" y1="5342.6133" y2="5342.6133"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234.6475" x="778.519" y="5322.5605">close secure session (SAM certificate,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="13.8062" x="782.6323" y="5337.8711">as</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82.5767" x="800.5518" y="5337.8711">non-ratified</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.2275" x="883.1284" y="5337.8711">)</text><polygon fill="#181818" points="782.519,5367.9238,772.519,5371.9238,782.519,5375.9238,778.519,5371.9238" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="776.519" x2="1029.1665" y1="5371.9238" y2="5371.9238"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.229" x="788.519" y="5367.1816">[card certificate]</text><polygon fill="#B0E0E6" points="991,5384.9238,1077,5384.9238,1087,5403.9238,1077,5422.9238,991,5422.9238,981,5403.9238,991,5384.9238" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82.2783" x="993" y="5401.4922">card in state:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82.5767" x="993" y="5416.8027">non-ratified</text><path d="M534,5433.5449 L534,5464.5449 L998,5464.5449 L998,5443.5449 L988,5433.5449 L534,5433.5449 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M988,5433.5449 L988,5443.5449 L998,5443.5449 L988,5433.5449 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M559.5,5448.2949 C559.5,5453.6796 555.1347,5458.0449 549.75,5458.0449 C544.3653,5458.0449 540,5453.6796 540,5448.2949 C540,5442.9102 544.3653,5438.5449 549.75,5438.5449 C555.1347,5438.5449 559.5,5442.9102 559.5,5448.2949 " fill="#FFCC4D" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><path d="M540.6717,5444.513 C540.8017,5444.6425 541.4506,5445.0314 541.58,5445.4203 C541.71,5445.8087 541.97,5448.0116 542.749,5448.66 C543.5523,5449.3273 546.5823,5449.0793 547.1625,5448.79 C548.4608,5448.1427 548.6201,5446.3357 548.8498,5445.4203 C548.9792,5444.9019 549.7581,5444.9019 549.7581,5444.9019 C549.7581,5444.9019 550.537,5444.9019 550.667,5445.4198 C550.8967,5446.3357 551.057,5448.1427 552.3543,5448.7895 C552.935,5449.0793 555.9651,5449.3279 556.7695,5448.6605 C557.5473,5448.0122 557.8068,5445.8092 557.9368,5445.4203 C558.0657,5445.0319 558.7157,5444.643 558.8451,5444.5135 C558.9757,5444.3841 558.9757,5443.8657 558.8451,5443.7357 C558.5857,5443.4768 555.5225,5443.246 552.2243,5443.6063 C551.5662,5443.6783 551.316,5443.8652 549.7576,5443.8652 C548.2003,5443.8652 547.949,5443.6778 547.2914,5443.6063 C543.9953,5443.2455 540.9317,5443.4763 540.6717,5443.7352 C540.5422,5443.8646 540.5422,5444.3835 540.6717,5444.513 " fill="#292F33" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><path d="M554.8065,5451.344 C554.71,5451.2568 554.566,5451.2513 554.4625,5451.3283 C554.4414,5451.344 552.3381,5452.8991 549.75,5452.8991 C547.1684,5452.8991 545.0581,5451.344 545.0375,5451.3283 C544.934,5451.2513 544.79,5451.2578 544.6935,5451.344 C544.5977,5451.4306 544.576,5451.5736 544.6426,5451.6841 C544.7125,5451.8006 546.3852,5454.5241 549.75,5454.5241 C553.1148,5454.5241 554.788,5451.8006 554.8574,5451.6841 C554.924,5451.5731 554.9029,5451.4306 554.8065,5451.344 " fill="#664500" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="419.9102" x="563.6133" y="5456.9277">ratification command immediately performed after session closing</text><polygon fill="#181818" points="1018.1665,5486.9805,1028.1665,5490.9805,1018.1665,5494.9805,1022.1665,5490.9805" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="771.519" x2="1024.1665" y1="5490.9805" y2="5490.9805"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.6274" x="778.519" y="5486.2383">ratification command</text><polygon fill="#181818" points="782.519,5500.9805,772.519,5504.9805,782.519,5508.9805,778.519,5504.9805" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="776.519" x2="1029.1665" y1="5504.9805" y2="5504.9805"/><polygon fill="#B0E0E6" points="992,5517.9805,1078,5517.9805,1088,5536.9805,1078,5555.9805,992,5555.9805,982,5536.9805,992,5517.9805" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82.2783" x="994" y="5534.5488">card in state:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="48.896" x="994" y="5549.8594">ratified</text><polygon fill="#0000FF" points="513.916,5578.9121,503.916,5582.9121,513.916,5586.9121,509.916,5582.9121" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="507.916" x2="765.519" y1="5582.9121" y2="5582.9121"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.229" x="519.916" y="5578.1699">[card certificate]</text><polygon fill="#FFA500" points="688,5595.9121,843,5595.9121,853,5614.9121,843,5633.9121,688,5633.9121,678,5614.9121,688,5595.9121" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.4243" x="690" y="5612.4805">reader in state:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="151.9248" x="690" y="5627.791">Wait For Card Removal</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1538.9785" x="0" y="5660.1885"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1538.9785" y1="5660.1885" y2="5660.1885"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1538.9785" y1="5663.1885" y2="5663.1885"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="279.8779" x="629.5503" y="5649.5332"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="261.5933" x="635.5503" y="5666.1016">End of the contactless card transaction</text><polygon fill="#00FF00" points="1214.1885,5730.7754,1224.1885,5734.7754,1214.1885,5738.7754,1218.1885,5734.7754" style="stroke:#00FF00;stroke-width:1.0;"/><line style="stroke:#00FF00;stroke-width:1.0;" x1="502.916" x2="1220.1885" y1="5734.7754" y2="5734.7754"/><text fill="#008000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="50.2354" x="509.916" y="5699.4121">SAM #2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.9224" x="509.916" y="5714.7227">transmit card request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.6528" x="542.8223" y="5730.0332">- APDU list</text><polygon fill="#181818" points="1477.4785,5760.0859,1487.4785,5764.0859,1477.4785,5768.0859,1481.4785,5764.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1236.1885" x2="1483.4785" y1="5764.0859" y2="5764.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="227.2842" x="1243.1885" y="5759.3438">digest authenticate (card certificate)</text><polygon fill="#181818" points="1247.1885,5789.3965,1237.1885,5793.3965,1247.1885,5797.3965,1243.1885,5793.3965" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1241.1885" x2="1488.4785" y1="5793.3965" y2="5793.3965"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.4131" x="1253.1885" y="5788.6543">[authentication status]</text><polygon fill="#00FF00" points="513.916,5818.707,503.916,5822.707,513.916,5826.707,509.916,5822.707" style="stroke:#00FF00;stroke-width:1.0;"/><line style="stroke:#00FF00;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="507.916" x2="1230.1885" y1="5822.707" y2="5822.707"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149.9507" x="519.916" y="5817.9648">[authentification status]</text><polygon fill="#181818" points="96.0166,5985.8125,86.0166,5989.8125,96.0166,5993.8125,92.0166,5989.8125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="496.916" y1="5989.8125" y2="5989.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.8472" x="102.0166" y="5847.2754">[Calypso card image:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.0708" x="134.9229" y="5862.5859">- identification data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.2578" x="134.9229" y="5877.8965">- invalidation status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.6304" x="134.9229" y="5893.207">- environment data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.522" x="134.9229" y="5908.5176">-</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="line-through" textLength="110.5063" x="146.5581" y="5908.5176">ratification status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.3018" x="134.9229" y="5923.8281">- last event data (updated)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.8633" x="134.9229" y="5939.1387">- contract list data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.0513" x="134.9229" y="5954.4492">- contract #x data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.356" x="134.9229" y="5969.7598">- counter #x data (updated)]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.4956" x="102.0166" y="5985.0703">authentification status</text><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="127.0166" y1="6024.9375" y2="6024.9375"/><line style="stroke:#181818;stroke-width:1.0;" x1="127.0166" x2="127.0166" y1="6024.9375" y2="6037.9375"/><line style="stroke:#181818;stroke-width:1.0;" x1="86.0166" x2="127.0166" y1="6037.9375" y2="6037.9375"/><polygon fill="#181818" points="96.0166,6033.9375,86.0166,6037.9375,96.0166,6041.9375,92.0166,6037.9375" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.4629" x="92.0166" y="6020.1953">card successfully authenticated</text><ellipse cx="297.4868" cy="6016.7083" fill="#CCD6DD" rx="0.8125" ry="0.8125" style="stroke:#CCD6DD;stroke-width:1.0;"/><path d="M298.7976,6008.9809 C298.8253,6008.8525 298.841,6008.7198 298.841,6008.5833 C298.841,6007.5363 297.9922,6006.6875 296.9451,6006.6875 C295.9896,6006.6875 295.2075,6007.396 295.0764,6008.3152 C295.0672,6008.3152 295.0585,6008.3125 295.0493,6008.3125 C294.4513,6008.3125 293.966,6008.7978 293.966,6009.3958 C293.966,6009.9938 294.4513,6010.4792 295.0493,6010.4792 C295.0672,6010.4792 295.0834,6010.4748 295.1008,6010.4738 C295.0694,6010.5604 295.0493,6010.6525 295.0493,6010.75 C295.0493,6010.9992 295.1641,6011.2196 295.3413,6011.3691 C295.1614,6011.5625 295.0493,6011.8193 295.0493,6012.1042 C295.0493,6012.7022 295.5346,6013.1875 296.1326,6013.1875 C296.1326,6013.3906 296.1922,6013.578 296.2892,6013.7405 C295.8954,6013.7963 295.591,6014.1322 295.591,6014.5417 C295.591,6014.9902 295.955,6015.3542 296.4035,6015.3542 C296.852,6015.3542 297.216,6014.9902 297.216,6014.5417 C297.216,6014.4442 297.1959,6014.3521 297.1645,6014.2654 C297.1819,6014.2665 297.1981,6014.2708 297.216,6014.2708 C297.814,6014.2708 298.2993,6013.7855 298.2993,6013.1875 C298.2993,6012.862 298.1531,6012.5738 297.9256,6012.375 C298.1525,6012.1762 298.2993,6011.888 298.2993,6011.5625 C298.2993,6011.3578 298.2392,6011.1682 298.1401,6011.0046 C298.1926,6011.0127 298.2446,6011.0208 298.2993,6011.0208 C298.8973,6011.0208 299.3826,6010.5355 299.3826,6009.9375 C299.3826,6009.5199 299.1438,6009.1618 298.7976,6008.9809 " fill="#CCD6DD" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><ellipse cx="296.6743" cy="6012.1042" fill="#E4EBEF" rx="0.5417" ry="0.5417" style="stroke:#E4EBEF;stroke-width:1.0;"/><path d="M298.2993,6008.8542 C298.2993,6008.2556 297.8145,6007.7708 297.216,6007.7708 C296.6174,6007.7708 296.1326,6008.2556 296.1326,6008.8542 C296.1326,6008.8715 296.137,6008.8883 296.1381,6008.9056 C296.0514,6008.8742 295.9593,6008.8542 295.8618,6008.8542 C295.4128,6008.8542 295.0493,6009.2176 295.0493,6009.6667 C295.0493,6010.1157 295.4128,6010.4792 295.8618,6010.4792 C295.9691,6010.4792 296.0704,6010.4575 296.1641,6010.4196 C296.2572,6010.7652 296.5698,6011.0208 296.9451,6011.0208 C297.3942,6011.0208 297.7576,6010.6574 297.7576,6010.2083 C297.7576,6010.074 297.7219,6009.9494 297.6645,6009.8378 C298.0382,6009.6672 298.2993,6009.2924 298.2993,6008.8542 " fill="#E4EBEF" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><path d="M297.5475,6003.4787 C297.1049,6003.0464 297.1049,6003.0464 297.0746,6003.0226 C297.2008,6002.6878 297.1634,6002.3352 296.9392,6002.1061 C296.5996,6001.7724 295.9869,6001.8418 295.5655,6002.2632 L294.4166,6003.412 C293.9958,6003.8329 293.9259,6004.4461 294.2596,6004.7857 C294.4887,6005.0094 294.8408,6005.0473 295.1761,6004.9211 C295.2004,6004.9509 295.6321,6005.394 295.6321,6005.394 C296.0552,6005.8165 296.7409,6005.8165 297.164,6005.394 L297.5469,6005.0105 C297.97,6004.5875 297.97,6003.9017 297.5475,6003.4787 " fill="#C1694F" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><path d="M297.2366,6003.971 C297.2886,6003.919 297.4505,6003.7479 297.6174,6003.5648 C297.5941,6003.5361 297.574,6003.5058 297.5469,6003.4787 C297.5469,6003.4787 297.1044,6003.0464 297.0741,6003.0226 C297.0134,6003.184 296.9175,6003.3422 296.7805,6003.4787 L295.6327,6004.6275 C295.4956,6004.7646 295.3375,6004.8605 295.1761,6004.9211 C295.2004,6004.9509 295.6321,6005.394 295.6321,6005.394 C295.6587,6005.4205 295.6896,6005.4406 295.7183,6005.4644 C295.8759,6005.323 296.0346,6005.1735 296.0877,6005.121 L297.2366,6003.971 " fill="#A95233" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><path d="M312.4969,6014.6971 L309.7523,6011.9525 C307.7676,6009.9678 305.7862,6009.71 301.9751,6008.1906 L300.2694,6009.8963 C302.0195,6013.4768 302.0222,6015.7133 304.0069,6017.698 L306.752,6020.4431 C307.2899,6020.981 307.72,6021.4235 308.2589,6020.8851 L312.8138,6016.3286 C313.3533,6015.7891 313.0348,6015.235 312.4969,6014.6971 " fill="#264612" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><path d="M302.3705,6008.4013 C303.3124,6008.7502 303.3124,6008.7502 302.0671,6009.9955 C300.9177,6011.1449 300.4871,6010.3481 300.4871,6010.3481 L298.62,6008.481 L300.5353,6006.5656 L302.3705,6008.4013 " fill="#FFE8B6" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><path d="M300.7016,6006.7325 L300.1524,6006.1827 L298.237,6008.0975 L298.7863,6008.6473 C299.3247,6009.1851 299.2299,6009.2187 300.2184,6008.2302 L300.5391,6007.909 C301.3202,6007.1273 301.2395,6007.2703 300.7016,6006.7325 " fill="#FFD983" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><path d="M300.3436,6005.608 C300.661,6005.9254 300.661,6006.44 300.343,6006.7574 L298.8117,6008.2887 C298.4943,6008.6066 297.9797,6008.6066 297.6623,6008.2887 C297.3449,6007.9718 297.3449,6007.4567 297.6623,6007.1393 L299.1936,6005.608 C299.5116,6005.2911 300.0261,6005.2905 300.3436,6005.608 " fill="#264612" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><path d="M308.9615,6012.694 C308.5384,6012.2715 307.8521,6012.2715 307.4291,6012.694 L304.7484,6015.3753 C304.3254,6015.7978 304.3254,6016.4841 304.7484,6016.9071 L307.0461,6019.2049 C307.4692,6019.6279 308.1555,6019.6279 308.5785,6019.2049 L311.2592,6016.5242 C311.6823,6016.1011 311.6823,6015.4148 311.2592,6014.9923 L308.9615,6012.694 " fill="#FFE8B6" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><polygon fill="#181818" points="331.9106,6069.1367,341.9106,6073.1367,331.9106,6077.1367,335.9106,6073.1367" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="337.9106" y1="6073.1367" y2="6073.1367"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84.8999" x="92.0166" y="6068.3945">notification &amp;</text><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="145.8809" x="181.0298" y="6067.3398">access granting</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1538.9785" x="0" y="6101.792"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1538.9785" y1="6101.792" y2="6101.792"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1538.9785" y1="6104.792" y2="6104.792"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="252.1006" x="643.439" y="6091.1367"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="233.8159" x="649.439" y="6107.7051">End of the Access Control opertion</text><polygon fill="#181818" points="480.916,6141.7578,490.916,6145.7578,480.916,6149.7578,484.916,6145.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="486.916" y1="6145.7578" y2="6145.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22.2612" x="92.0166" y="6141.0156">init</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220.7017" x="118.3911" y="6141.0156">crypto context for next transaction</text><polygon fill="#00FF00" points="1214.1885,6201.6895,1224.1885,6205.6895,1214.1885,6209.6895,1218.1885,6205.6895" style="stroke:#00FF00;stroke-width:1.0;"/><line style="stroke:#00FF00;stroke-width:1.0;" x1="502.916" x2="1220.1885" y1="6205.6895" y2="6205.6895"/><text fill="#008000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.5522" x="509.916" y="6170.3262">SAM #x'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.9224" x="509.916" y="6185.6367">transmit card request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.6528" x="542.8223" y="6200.9473">- APDU list</text><polygon fill="#181818" points="1477.4785,6231,1487.4785,6235,1477.4785,6239,1481.4785,6235" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1236.1885" x2="1483.4785" y1="6235" y2="6235"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84.4048" x="1243.1885" y="6230.2578">get challenge</text><polygon fill="#181818" points="1247.1885,6260.3105,1237.1885,6264.3105,1247.1885,6268.3105,1243.1885,6264.3105" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1241.1885" x2="1488.4785" y1="6264.3105" y2="6264.3105"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.8169" x="1253.1885" y="6259.5684">[SAM challenge]</text><polygon fill="#00FF00" points="513.916,6289.6211,503.916,6293.6211,513.916,6297.6211,509.916,6293.6211" style="stroke:#00FF00;stroke-width:1.0;"/><line style="stroke:#00FF00;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="507.916" x2="1230.1885" y1="6293.6211" y2="6293.6211"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.8169" x="519.916" y="6288.8789">[SAM challenge]</text><polygon fill="#181818" points="96.0166,6303.6211,86.0166,6307.6211,96.0166,6311.6211,92.0166,6307.6211" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="90.0166" x2="496.916" y1="6307.6211" y2="6307.6211"/><line style="stroke:#181818;stroke-width:1.0;" x1="85.0166" x2="127.0166" y1="6336.9316" y2="6336.9316"/><line style="stroke:#181818;stroke-width:1.0;" x1="127.0166" x2="127.0166" y1="6336.9316" y2="6349.9316"/><line style="stroke:#181818;stroke-width:1.0;" x1="86.0166" x2="127.0166" y1="6349.9316" y2="6349.9316"/><polygon fill="#181818" points="96.0166,6345.9316,86.0166,6349.9316,96.0166,6353.9316,92.0166,6349.9316" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28.355" x="92.0166" y="6332.1895">wait</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="124.4849" y="6332.1895">for card removal</text><line style="stroke:#A80036;stroke-width:2.0;" x1="1026.1665" x2="1044.1665" y1="6340.9316" y2="6358.9316"/><line style="stroke:#A80036;stroke-width:2.0;" x1="1026.1665" x2="1044.1665" y1="6358.9316" y2="6340.9316"/><polygon fill="#FFA500" points="777.519,6375.2422,767.519,6379.2422,777.519,6383.2422,773.519,6379.2422" style="stroke:#FFA500;stroke-width:1.0;"/><line style="stroke:#FFA500;stroke-width:1.0;" x1="771.519" x2="936.6895" y1="6379.2422" y2="6379.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27.3394" x="783.519" y="6374.5">card</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="54.0186" x="814.9717" y="6374.5">removal</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.4727" x="877.2168" y="6374.5">.  .  .  .  .</text><polygon fill="#FFA500" points="687,6392.2422,845,6392.2422,855,6411.2422,845,6430.2422,687,6430.2422,677,6411.2422,687,6392.2422" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.4243" x="689" y="6408.8105">reader in state:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="154.9082" x="689" y="6424.1211">Wait For Card Insertion</text><polygon fill="#FFA500" points="419.7148,6453.1738,409.7148,6457.1738,419.7148,6461.1738,415.7148,6457.1738" style="stroke:#FFA500;stroke-width:1.0;"/><line style="stroke:#FFA500;stroke-width:1.0;" x1="413.7148" x2="765.519" y1="6457.1738" y2="6457.1738"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="54.0186" x="425.7148" y="6452.4316">removal</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1538.9785" x="0" y="6485.8291"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1538.9785" y1="6485.8291" y2="6485.8291"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1538.9785" y1="6488.8291" y2="6488.8291"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="226.1831" x="656.3977" y="6475.1738"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="207.8984" x="662.3977" y="6491.7422">ready for next card transaction</text><!--SRC=[xLfjRziu4lxkNq4qG9i8yMwIfflMI79m_7B8XqE3RW_teV47Hg9j8ZAb8-Katbz_CoGbaP8inubtjoskA8fQ6d9UECypGrBlr3qNAPLqGGOnLUegaH6JWoHE9DaR7mzEZyQTDf7XQNzmD7H4LCOaIx9LolgUOF_JS30SDmfUUu9Nf_spqOT6mO4_ut1uV7NIA3Zo14TNdzxxgkSqIXwvc94fZHNhEAz-psZ6sZtiXnb_uDcgIQhpZdnXKIrYDBoVoMGf8YrzVYvPT7a9yHsEXgD1ItmBoT7PwU3ze3Fd4IFvmz9Tq7gpb6dCDYfEjPZMVJeQZCzQTPV27qUdf_rXhhvuxbbm5oytwqSXxS_L-CFugbLxBlh-zDF7uLMkspxrDFzJCYOsgfwXbDRT7_V7nwsw2zcJqM1mTfmhpnyxsa7zPqd5RBFhYHOpopu-6NrgDQ0K7lrsDZevoIqedlicG0HMpmd0olW_6en6c_pNeYU3zwCFHuxxgufg6cQG_M- -yl2UPGYeVfh6FAGPJyGRGXMXQKhsPaaSTK1NnaEUKf6HDryO1MsaVtEjfIHDETbBkRZtnGOqNgKgkHK3AgD2EjJICP_DiojCkgOX14VS2gF7ZfAHLUkClSC0KRaYRu80XmH18RnHnU_zVzsAt2XL6cNoSVqGnoX55vvDPgXh58omDe6i9uN1vmz0LqwGtnNFQj8N5y1S8LEA31AHoIGcR777eeX5v2kJ2oveJ1JBS1KLkRY0wTEqUmd_z4WGm8iW88uN9EPtLWGzxv7pASnAGioV2-Id84WbWnYm83Z_5TzTcg0g5hCGqwDtAswpBfdo6FA9tAt8JVB8PFUp817DQCTn10BhkO9FkjgqJiGyEMkHV9b5H8LCKCaJQrhCPZHSQMyBcT8kQUpIIIiRBPBQeaqc9RWcfKbg9SAvJ4IoLElCQx7XszxHqNXyT3IvB3BBrseeJASLsNigrDv2Hb2X5Znpz4dstoLJcGc6OqiYtTLfIc2egFbpp8z5ZoGf4sQES4w5O75dRQR2xswtjD-To_7F15IoaF47vXcjqaH0KVTIevXB9F0xUG1xTRuG-FDrplGQIxQWN2YI0XgeO2ABLtPUWCWTonvPxeAE5TNwr2yT9YA2quBNPHxqog7Q352n04BGFCONTCRgYUA0AGX2gX1nQ1UgV1uSUkIRaxDQZKrb872HyQbbPesmIHqy3S7f8usHgKmMUiv54YrZ9zo7XCAFS2cP6nJooBEv7auBpj21uuf0QC4i-A-86EH4PEASJ4bcbm48rOsfZafeey85nwY4SfLcC2LaBdi2ww042VoFOq8PiD09cERoJlW2fBnhWehsoKD9_sRuRw16bMr2I1KVCvOXCkAOwLx2Xm2igqw4_Ft46LxuaKUfAjgCWx2HiKA7iS8TqRfAMOYPH_hNG-yT5myqvf2Aa0rc3kYzbwfbvTgCtYNnUpdx2kfljKc5SuPWAesYh-D-OuIhb4OHW2QvKqm2g8F0bNF4m9OCKHwnp6W3Y7KXhrD6TKy7e0VKp4jsS5ifs_rAyvCBlOgirmc2_r20o1YmgKdl6ZXPciaHtNE3RjVmvl3P1kIHQkGZr7LaO4KL4o5hwckWraZ3SzelspsMiNnRfKFiTagVphzPfoRTVv2UKOVKKzXFo2_ktrU7viRq011gBpRbLDt2ecB577Cw6_e1v8V9PJcRdunwGsLwNx9t_Fg6eBdDTftHfhHs1DNk6tztkuuB3TCPIx0LplSVP9_owA0-62XIAnWFhYUrYN8H06TuhqgEijc4_EIESGAyJKFYUEBr3440Iy-dAyYnd1wY2XEeOaAsTQz9fNBePhE6JMJpqYOdz9iSbswVnVwmWdvRqTxfs1VrfPnqwdK4wCJIHQshgMwA08CPxEuu3AvuuGvhgYaGu6GfG-Q_CaseUUCsOs7UZ7qMq2eXdIZj5xYaS6UEdPD20ac4rus-e8pNxTOmjS6mIiZ-S7Hr_HNMNDDkp1vOV62aqJZ2n0E7AhQ0XS1QprvJqSFdxfl2P06j9KHcFmZk6KknJJIyebqusA8Xj3fxQYbcU3J2LE-IU5qLeJ5wkYBt8daKjq8aq8022g0fjHn9W3YZfGHE1oQTirfqEuxMBGZwvCLjw1fUnXEYbDZZ5HXKXD7cbbtoJbE5qpbP2TFdDECB_eT6MQ-M2IO_CkXnbhEvcxTwZI1ORlxYx6lAHZKVTGGYTWV1k6UhGmo2jrxcoVZQCqWl5eKAaIjgh1Bbch_rHfij55YxhXxORjoVPBAc2kXSi4DiwS4Mfg2nlFHKEWsoTvCymlYYIdfTXfc1HPMkOjSiQbvKOsFveEx4P6kaFu-eT6f17cO4-4XaFmxfR07_ztyN_9kng4CE7Ky2m_VBqAz7L2dpRFpKXgnfe_xslBPdXgtc-hiQ2tItnS1W0hXN1U1t1mqyBP7mk9OOFmqwJhzZT7ZHRoavhjZpQqp3g1yA9dP7kSaD7pwvaKmL8_yKlEmz_PHe-V0Ze6NlwHbOsNlQ7Yd5c9y29vNdpSwjHG_qxad8pJbiiXGP-hyp766dQYRzMO7qstSDf3pqRJYoCiSxtjJy523Ad-Pnt8oiY4svOFQ81ZQPonJlEBQ4b8rDn49OJyLS0_O5UoGGcIMpXoumCUwQZOVvogEGwSQj1t6YM6tZ37j2acyJDmDZv_3KHZduf5FmyM0JIrXTUFI6trTa46iyIfWkC_GjFs3J9vYgwHZjsbmsGYGaHao7Ch-1TEByo62s85WAVSWJ18Se8BIKXRazkfY2ANZNmZ7pQ6miGEHgRGlm7fATF2RB6E-HYM0O4Foy0vB3t5MOCxpQOiDcdfA8JwTC6vhFb46qlCCJ36FbyEG5Tvp7ExxYzAwJ5-kFZFfnd9z06tSqSF9xOhnArd503sDpHMnJY6YYTBsktghQIu68Wn4AarpQioB59AVnGUrRW-e44P_fmpm1eTYtPrJQlcSFDUWd-zMJqQqdSFVNBz5TsO6yQWei9o-RG2UsgeysDQ-I6NKsAJ4VbOnILieIzfXd6oogmkqW7-GPzeo96lYtUIuih6lcqaouxjuVR_fqPODIk_dgtvLkkVpViiiv-xwwd1fNbgtEyQ6jZcix7goDkRWMdQpHObSshwbwXGyj_Xidh_LETgBcwbjPhiDRWT_vuIMWw9Q7jorNc7vcR7KuxEjm3eYVUzBljLiv8_F5WaMubOXN-1tLD94Bl1p4ibwjLbwngZMn3PCtN0Flv3pSkMMtYEZwVUuQGBNOiUqN05_O8e54z0oxk20ZY53HbuWCDCTuuLRTRTdl5xOk-2T_yZTDbjhe4lkcJ0VGbbydf0SDfEUCy2vhswWl7zDssz3u_TDViJNfTXis9zrku_Q4x9kw4XtiOADIJZQv5Mj2r7f4hPkbfRxedIvZGBMxcX5m0hJkYvJE1EjTcd7upOp-YY7NyfQSA_u7wnr_n09kxend4YivVl1o_Yk-lApcUyCdFVuT_Fy_2VmhFmbi-nHB6lBgLBaHVYjOl9NviUdxAfbJuAw_hch-yApruwh25fsLvgQ_oAWczlqV]--></g></svg>