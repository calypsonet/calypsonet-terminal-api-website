<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=generator content="Wowchemy 5.3.0 for Hugo">
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap">
<link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" media=print onload="this.media='all'">
<meta name=description content="Public API which defines the elements shared by the reader.">
<link rel=alternate hreflang=en-us href=https://terminal-api.calypsonet.org/apis/calypsonet-terminal-reader-api/>
<meta name=theme-color content="#1d87bb">
<link rel=stylesheet href=../../css/vendor-bundle.min.f1ecf783c14edc00c9320c205831ad8e.css media=print onload="this.media='all'">
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin=anonymous media=print onload="this.media='all'">
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/darcula.min.css crossorigin=anonymous title=hl-light media=print onload="this.media='all'">
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/darcula.min.css crossorigin=anonymous title=hl-dark media=print onload="this.media='all'" disabled>
<link rel=stylesheet href=../../css/wowchemy.f61eee4caed37d9fc646a60ac588051f.css>
<link rel=manifest href=../../manifest.webmanifest>
<link rel=icon type=image/png href=../../media/icon_huceb5ed780c823eaac47da25fabbbc8be_2207_32x32_fill_lanczos_center_3.png>
<link rel=apple-touch-icon type=image/png href=../../media/icon_huceb5ed780c823eaac47da25fabbbc8be_2207_180x180_fill_lanczos_center_3.png>
<link rel=canonical href=https://terminal-api.calypsonet.org/apis/calypsonet-terminal-reader-api/>
<meta property="twitter:card" content="summary">
<meta property="og:site_name" content="Calypso Networks Association Terminal APIs">
<meta property="og:url" content="https://terminal-api.calypsonet.org/apis/calypsonet-terminal-reader-api/">
<meta property="og:title" content="Calypsonet Terminal Reader API | Calypso Networks Association Terminal APIs">
<meta property="og:description" content="Public API which defines the elements shared by the reader."><meta property="og:image" content="https://terminal-api.calypsonet.org/media/logo.svg">
<meta property="twitter:image" content="https://terminal-api.calypsonet.org/media/logo.svg"><meta property="og:locale" content="en-us">
<meta property="article:modified_time" content="2022-05-25T12:17:02+04:00">
<title>Calypsonet Terminal Reader API | Calypso Networks Association Terminal APIs</title>
</head>
<body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=b11839ed0888d32a0cc4fe9885a359ec>
<script src=../../js/wowchemy-init.min.da42964e270e05a6063fbca894d7ccff.js></script>
<aside class=search-modal id=search>
<div class=container>
<section class=search-header>
<div class="row no-gutters justify-content-between mb-3">
<div class=col-6>
<h1>Search</h1>
</div>
<div class="col-6 col-search-close">
<a class=js-search href=# aria-label=Close><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a>
</div>
</div>
<div id=search-box>
<input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control aria-label=Search...>
</div>
</section>
<section class=section-search-results>
<div id=search-hits>
</div>
</section>
</div>
</aside>
<div class=page-header>
<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main>
<div class=container-xl>
<div class="d-none d-lg-inline-flex">
<a class=navbar-brand href=../../><img src=../../media/logo.svg alt="Calypso Networks Association Terminal APIs"></a>
</div>
<button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span>
</button>
<div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
<a class=navbar-brand href=../../><img src=../../media/logo.svg alt="Calypso Networks Association Terminal APIs"></a>
</div>
<div class="navbar-collapse main-menu-item collapse justify-content-center" id=navbar-content>
<ul class="navbar-nav d-md-inline-flex">
<li class=nav-item>
<a class="nav-link active" href=../../apis/><span>APIs</span></a>
</li>
<li class="nav-item dropdown">
<a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>Community</span><span class=caret></span>
</a>
<div class=dropdown-menu>
<a class=dropdown-item href=../../projects-dashboard/><span>Dashboard</span></a>
<a class=dropdown-item href=../../><span>Roadmap</span></a>
</div>
</li>
</ul>
</div>
<ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
<li class=nav-item>
<a class="nav-link js-search" href=# aria-label=Search><i class="fas fa-search" aria-hidden=true></i></a>
</li>
</ul>
</div>
</nav>
</div>
<div class=page-body>
<div class="container-fluid docs">
<div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 docs-sidebar">
<form class="docs-search d-flex align-items-center">
<button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation">
<div class=d-flex>
<span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
Overview
</span>
<span><i class="fas fa-chevron-down"></i></span>
</div>
</button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>Search...</span>
<span class=sidebar-search-shortcut>/</span>
</button>
</form>
<nav class="collapse docs-links" id=docs-nav>
<ul class="nav docs-sidenav">
<li><a href=../../apis/>Overview</a></li>
<li class=active><a href=../../apis/calypsonet-terminal-reader-api/>Reader API</a></li>
<li><a href=../../apis/calypsonet-terminal-card-api/>Card API</a></li>
<li><a href=../../apis/calypsonet-terminal-calypso-api/>Calypso API</a></li>
</ul>
</nav>
</div>
<div class="d-none d-xl-block col-xl-2 docs-toc">
<ul class="nav toc-top">
<li><a href=# id=back_to_top class=docs-toc-title>Contents</a></li>
</ul>
<nav id=TableOfContents>
<ul>
<li><a href=#interfaces>Interfaces</a>
<ul>
<li><a href=#reader-identification>Reader identification</a></li>
<li><a href=#configurablecardreader>ConfigurableCardReader</a></li>
<li><a href=#reader-observation>Reader observation</a></li>
<li><a href=#card-selection>Card Selection</a></li>
</ul>
</li>
<li><a href=#card-selection-modes>Card selection modes</a></li>
<li><a href=#observable-reader-states>Observable reader states</a></li>
<li><a href=#limitations--constraints>Limitations & constraints</a></li>
</ul>
<ul>
<li><a href=#implementations--api-documentation>Implementations & API Documentation</a>
<ul>
<li><a href=#reader-api-in-java>Reader API in Java</a></li>
<li><a href=#reader-api-in-c>Reader API in C++</a></li>
</ul>
</li>
</ul>
</nav>
</div>
<main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role=main>
<article class=article>
<div class=docs-article-container>
<h1>Calypsonet Terminal Reader API</h1>
<div class=article-style>
<p>The <strong>Calypsonet Terminal Reader API</strong> defines the public elements shared by the reader.</p>
<h2 id=interfaces>Interfaces</h2>
<p>The reader API is a high-level interface used by terminal applications to operate smart card readers, it:</p>
<ul>
<li>
<p>provides the means to identify card readers and verify the presence of smart cards.</p>
</li>
<li>
<p>offers the possibility to configure the observation of readers in order to be notified on card insertion or withdrawal.</p>
</li>
<li>
<p>is the entry point to manage the selection of a smart card in a specific reader.</p>
</li>
</ul>
<p>
<figure>
<div class="d-flex justify-content-center">
<div class=w-100><img src=https://calypsonet.github.io/calypsonet-terminal-reader-java-api/1.0.1-SNAPSHOT/api_class_diagram.svg alt="Reader API - class diagram" loading=lazy data-zoomable></div>
</div></figure>
</p>
<h3 id=reader-identification>Reader identification</h3>
<p>Any smart card reader entity should be accessible through an implementation of the ‘CardReader’ interface. Each is defined with a specific name. A reader could be designed to operate contactless card or a contact card. Finally, this interface can inform about the presence of a card in the reader.</p>
<h3 id=configurablecardreader>ConfigurableCardReader</h3>
<p>A reader with the capability to configure the communication protocols with smart card (contactless or contact) could implement the ConfigurableCardReader interface to activate or deactivate some communication protocols.</p>
<h3 id=reader-observation>Reader observation</h3>
<p>If a reader has the ability to dynamically detect changes on the card presence, then it can also implement the interface ObservableCardReader.</p>
<p>Observers implementing the CardReaderObserverSpi could be declared to an observable card reader to be notified on specific CardReaderEvent: card insertion, card selection (matched), or card removal.</p>
<h3 id=card-selection>Card Selection</h3>
<p>The CardSelectionManager provides the possibility to « prepare a request that could contain one or several card application selections.</p>
<p>The CardSelection SPI interface could be extended by the API of a specific smart card solution to improve the selection request with settings specific to the smart card solution.</p>
<p>Through the card selection manager, the prepared card selections could be</p>
<ul>
<li>
<p>processed directly on a specific card reader on which a card is already present,</p>
</li>
<li>
<p>scheduled on a specific observable reader in order to be operated dynamically in case of card insertion detection.</p>
</li>
</ul>
<p>If several card selections are prepared, the card selection manager operate the card selection in the order of preparation. By default, the card selection manager stops the card selection processing on the first successful card selection, and the logical channel is kept open.</p>
<ul>
<li>
<p>In case the multiple selection mode is activated during the preparation, the card selection manager tries to operate ‘all’ the prepared selections, even if one or several of them are successful. If the last selection is successful, the logical channel could be kept open with the last selected application.</p>
</li>
<li>
<p>during the card selection preparation, it could also be explicitly requested to to close the logical channel after the card selection.</p>
</li>
</ul>
<h2 id=card-selection-modes>Card selection modes</h2>
<p>Depending on the card transaction use case, or on the reader capability, there are two ways to manage the selection of a card:</p>
<ul>
<li>Either on a simple reader, a selection could be operated directly by transmitting the card selection scenario. In this case the same entity manages both the card selection and the card processing.</li>
<li>Otherwise, on an observable reader, a scheduled card selection could be defined. In this case the card selection is operated automatically at the insertion of the card. In this case, the card selection is next managed by the observable reader, but the card processing is managed by a reader observer.</li>
</ul>
<figure id=figure-reader-api---card-selection-modes---activity-diagram>
<div class="d-flex justify-content-center">
<div class=w-100><img src=../../media/apis/reader_management_card_selection_modes_activity_diagram.svg alt="Reader API - Card Selection Modes - Activity Diagram" loading=lazy data-zoomable></div>
</div><figcaption>
Reader API - Card Selection Modes - Activity Diagram
</figcaption></figure>
<h2 id=observable-reader-states>Observable reader states</h2>
<p>An observable reader is active only when at least one reader observer is registered, and if the start of the detection has been requested.
When active, an observable reader could switch between three internal states:</p>
<ul>
<li>Wait for card insertion</li>
<li>Wait for card processing</li>
<li>Wait for card removal</li>
</ul>
<p>In the nominal case, a reader observer indicates to the observable reader that the processing of the card is finished by releasing the card channel.
To manage a failure of the reader observer process, the observable reader interface provides also a method to finalize the card processing.</p>
<figure id=figure-reader-api---observable-reader-states---activity-diagram>
<div class="d-flex justify-content-center">
<div class=w-100><img src=../../media/apis/reader_management_reader_observation_state_diagram.svg alt="Reader API - Observable Reader States - Activity Diagram" loading=lazy data-zoomable></div>
</div><figcaption>
Reader API - Observable Reader States - Activity Diagram
</figcaption></figure>
<p>The states could be switched:</p>
<ul>
<li>due to an explicit API request (blue arrows):
<ul>
<li>the release of the card channel,</li>
<li>the call of an observable reader method:
<ul>
<li>the addition or the remove of an observable reader,</li>
<li>a request to start or stop the detection, to finalize the card processing.</li>
</ul>
</li>
</ul>
</li>
<li>Or because of an external event (red arrows), the insertion or the remove of a card.
<ul>
<li>the insertion of a card causing the observable reader to notify a <code>CARD_MATCHED</code> reader event (in case of successful scheduled selection) or a <code>CARD_INSERTED</code> reader event (notification mode defined as <code>ALWAYS</code>).</li>
<li>the removal of a card causing the observable reader to notify a <code>CARD_REMOVED</code> reader event.</li>
</ul>
</li>
</ul>
<p>If a card detection is started with the <code>REPEATING</code> detection mode, then later when the card is removed, the reader starts again the detection of a new card.</p>
<p>Notification of card removal during the card removal wait state is a feature of any observable reader.
However, some observable readers may additionally have the ability to notify removal during the card processing state.</p>
<h2 id=limitations--constraints>Limitations & constraints</h2>
<p>On a specific card reader, the Reader API allows to address only a <strong>single logical channel</strong>.</p>
<h1 id=heading></h1>
<h2 id=implementations--api-documentation>Implementations & API Documentation</h2>
<div class="alert alert-note">
<div>
The third version number (x.y.<strong>z</strong>) only concerns updates of the javadoc because this component does not contain any implementation, but only an API.
Therefore, it is recommended to always perform a <strong>dynamic import</strong> as described above in order to have the most up-to-date documentation.
</div>
</div>
<h3 id=reader-api-in-java>Reader API in Java</h3>
<div class="alert alert-note">
<div>
<strong><code>1.0.0</code></strong>
<span class=component-metadata>
<i class="fas fa-doc pr-1 fa-fw"></i> <a href=https://calypsonet.github.io/calypsonet-terminal-reader-java-api/>Java Doc</a></span>
<span class=component-metadata>
<i class="fab fa-github pr-1 fa-fw"></i> <a href=https://github.com/calypsonet/calypsonet-terminal-reader-java-api/>GitHub repository</a></span>
<span class=component-metadata>
<i class="fas fa-exchange-alt pr-1 fa-fw"></i> <a href=https://github.com/calypsonet/calypsonet-terminal-reader-java-api/blob/main/CHANGELOG.md>Changelog</a></span>
</div>
</div>
<p>All deliverables are available directly from the <a href="https://search.maven.org/search?q=a:calypsonet-terminal-reader-java-api" target=_blank rel=noopener>Maven Central Repository</a> or by using one of the project resource managers below:</p>
<ul class="nav nav-tabs" id=tabs-4 role=tablist><li class=nav-item>
<a class="nav-link active tab-Gradle-Groovy" id=tabs-4-0-tab data-toggle=tab href=#tabs-4-0 role=tab onclick='handleClick("Gradle-Groovy")' aria-controls=tabs-4-0 aria-selected=true>
Gradle Groovy
</a>
</li><li class=nav-item>
<a class="nav-link tab-Gradle-Kotlin" id=tabs-4-1-tab data-toggle=tab href=#tabs-4-1 role=tab onclick='handleClick("Gradle-Kotlin")' aria-controls=tabs-4-1 aria-selected=false>
Gradle Kotlin
</a>
</li><li class=nav-item>
<a class="nav-link tab-Maven" id=tabs-4-2-tab data-toggle=tab href=#tabs-4-2 role=tab onclick='handleClick("Maven")' aria-controls=tabs-4-2 aria-selected=false>
Maven
</a>
</li></ul>
<div class=bd-clipboard><button type=button class="btn btn-clipboard btn-outline-light" title="Copy to clipboard" onclick="copyTabContentToClipboard('tabs-4',this)">Copy</button></div>
<div class=tab-content id=tabs-4-content><div class="tab-pane fade show active" id=tabs-4-0 role=tabpanel aria-labelled-by=tabs-4-0-tab>
<pre><code class=language-gradle>implementation &#39;org.calypsonet.terminal:calypsonet-terminal-reader-java-api:1.0.&#43;&#39;</code></pre>
</div>
<div class="tab-pane fade" id=tabs-4-1 role=tabpanel aria-labelled-by=tabs-4-1-tab>
<pre><code class=language-kotlin>implementation(&#34;org.calypsonet.terminal:calypsonet-terminal-reader-java-api:1.0.&#43;&#34;)</code></pre>
</div>
<div class="tab-pane fade" id=tabs-4-2 role=tabpanel aria-labelled-by=tabs-4-2-tab>
<pre><code class=language-xml>&lt;dependency&gt;
  &lt;groupId&gt;org.calypsonet.terminal&lt;/groupId&gt;
  &lt;artifactId&gt;calypsonet-terminal-reader-java-api&lt;/artifactId&gt;
  &lt;version&gt;[1.0.0,1.1.0)&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<h3 id=reader-api-in-c>Reader API in C++</h3>
<div class="alert alert-note">
<div>
<strong><code>1.0.0</code></strong>
<span class=component-metadata>
<i class="fab fa-github pr-1 fa-fw"></i> <a href=https://github.com/calypsonet/calypsonet-terminal-reader-cpp-api/>GitHub repository</a></span>
</div>
</div>
</div>
<div class=article-widget>
<div class=post-nav>
<div class=post-nav-item>
<div class=meta-nav>Next</div>
<a href=../../apis/calypsonet-terminal-card-api/ rel=prev>Calypsonet Terminal Card API</a>
</div>
</div>
</div>
</div>
<div class=body-footer>
<p>Last updated on 2022-05-25</p>
</div>
</article>
<footer class=site-footer>
<p class=powered-by id=copyright>
© 2022 Calypso Networks Association. All Rights Reserved.
</p>
<p class=powered-by id=template-info>
Published with <a href="https://wowchemy.com/?utm_campaign=poweredby" target=_blank rel=noopener>Wowchemy</a> — the free, <a href=https://github.com/wowchemy/wowchemy-hugo-themes target=_blank rel=noopener>open source</a> website builder that empowers creators.
</p>
</footer>
</main>
</div>
</div>
</div>
<div class=page-footer>
</div>
<div id=modal class="modal fade" role=dialog>
<div class=modal-dialog>
<div class=modal-content>
<div class=modal-header>
<h5 class=modal-title>Cite</h5>
<button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span>
</button>
</div>
<div class=modal-body>
<pre><code class="tex hljs"></code></pre>
</div>
<div class=modal-footer>
<a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank>
<i class="fas fa-copy"></i> Copy
</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank>
<i class="fas fa-download"></i> Download
</a>
<div id=modal-error></div>
</div>
</div>
</div>
</div>
<script src=../../js/vendor-bundle.min.b73dfaac3b6499dc997741748a7c3fe2.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/java.min.js crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/groovy.min.js crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/xml.min.js crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/kotlin.min.js crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/cpp.min.js crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/gradle.min.js crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/ini.min.js crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script>
<script id=search-hit-fuse-template type=text/x-template>
        <div class="search-hit" id="summary-{{key}}">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{title}}</a>
              <div class="article-metadata search-hit-type">{{type}}</div>
              <p class="search-hit-description">{{snippet}}</p>
            </div>
          </div>
        </div>
      </script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin=anonymous></script>
<script src=../../en/js/wowchemy.min.b5fb753d60f58f80800cbdc7ca79adc2.js></script>
<link rel=stylesheet href=https://cdn.datatables.net/1.10.22/css/dataTables.bootstrap4.min.css>
<script src=https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js></script>
<script src=https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap4.min.js></script>
</body>
</html>